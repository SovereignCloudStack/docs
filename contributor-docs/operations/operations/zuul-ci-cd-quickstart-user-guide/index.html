<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-contributor-docs docs-version-current docs-doc-page docs-doc-id-operations/operations/zuul-ci-cd-quickstart-user-guide" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Zuul users guide | One platform — standardized, built and operated by many.</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.scs.community/img/scs-og-basic.png"><meta data-rh="true" name="twitter:image" content="https://docs.scs.community/img/scs-og-basic.png"><meta data-rh="true" property="og:url" content="https://docs.scs.community/contributor-docs/operations/operations/zuul-ci-cd-quickstart-user-guide"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-contributor-docs-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-contributor-docs-current"><meta data-rh="true" property="og:title" content="Zuul users guide | One platform — standardized, built and operated by many."><meta data-rh="true" name="description" content="Prerequisites"><meta data-rh="true" property="og:description" content="Prerequisites"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.scs.community/contributor-docs/operations/operations/zuul-ci-cd-quickstart-user-guide"><link data-rh="true" rel="alternate" href="https://docs.scs.community/contributor-docs/operations/operations/zuul-ci-cd-quickstart-user-guide" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.scs.community/contributor-docs/operations/operations/zuul-ci-cd-quickstart-user-guide" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Zuul users guide","item":"https://docs.scs.community/contributor-docs/operations/operations/zuul-ci-cd-quickstart-user-guide"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="SCS Community Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="SCS Community Blog Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="SCS Community Blog JSON Feed">









<link rel="preconnect" href="https://matomo.scs.community/">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setDocumentTitle",document.domain+"/"+document.title]),_paq.push(["disableCookies"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var e="https://matomo.scs.community/";_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","2"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",p.parentNode.insertBefore(t,p)}()</script><link rel="stylesheet" href="/assets/css/styles.7136250c.css">
<script src="/assets/js/runtime~main.ff722ccb.js" defer="defer"></script>
<script src="/assets/js/main.6cc1e574.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="SCS" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="SCS" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/standards">Standards</a><a class="navbar__item navbar__link" href="/docs">For Operators</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/contributor-docs">For Contributors</a><a class="navbar__item navbar__link" href="/user-docs">For Users</a><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/docs/faq">FAQ</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/SovereignCloudStack/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/contributor-docs/development/"><span title="Developer documentation" class="categoryLinkLabel_W154">Developer documentation</span></a><button aria-label="Expand sidebar category &#x27;Developer documentation&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/contributor-docs/"><span title="Documentation for SCS Contributors" class="linkLabel_WmDU">Documentation for SCS Contributors</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/contributor-docs/operations/iam/identity-federation-in-scs"><span title="operations" class="categoryLinkLabel_W154">operations</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/contributor-docs/operations/iam/identity-federation-in-scs"><span title="iam" class="categoryLinkLabel_W154">iam</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/contributor-docs/operations/operations/zuul-ci-cd-quickstart-user-guide"><span title="operations" class="categoryLinkLabel_W154">operations</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/contributor-docs/operations/operations/zuul-ci-cd-quickstart-user-guide"><span title="Zuul users guide" class="linkLabel_WmDU">Zuul users guide</span></a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">operations</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">operations</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Zuul users guide</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Zuul users guide</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites" translate="no">​</a></h2>
<ol>
<li class="">Repository is known by <a href="https://zuul.scs.community" target="_blank" rel="noopener noreferrer" class="">SCS Zuul</a></li>
<li class="">Basic ansible knowledge</li>
<li class="">Basic yaml knowledge</li>
<li class="">zuul-client installed (Only if you want to create secrets. <a href="#what-about-secrets" class="">See also</a>)</li>
</ol>
<p>Check <a href="https://zuul.scs.community/t/SCS/projects" target="_blank" rel="noopener noreferrer" class="">SCS Zuul projects</a> for your repository to
be available. If it is missing you need an administrator to get your repository
configured to Zuul.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="who-is-it-for">Who is it for?<a href="#who-is-it-for" class="hash-link" aria-label="Direct link to Who is it for?" title="Direct link to Who is it for?" translate="no">​</a></h2>
<p>You may have heard about Zuul and may ask yourself if it is capable to support you.
Basically everything you use ansible for can be done using Zuul. That is not always
a good thing since you may get careless and your workload will exceed the CI/CD concept.</p>
<p>If you find yourself doing things under the following list you are at the right place.</p>
<ol>
<li class="">Code testing</li>
<li class="">Deployment tests using IaC</li>
</ol>
<p>If you want to, let&#x27;s say, monitor something using Zuul, that is possible but not the
intended use case.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="where-do-i-start">Where do I start?<a href="#where-do-i-start" class="hash-link" aria-label="Direct link to Where do I start?" title="Direct link to Where do I start?" translate="no">​</a></h2>
<p>Right in your project&#x27;s repository! The only prerequisite is that
your repository you want Zuul to work on is known by Zuul. This is done by the Zuul&#x27;s
tenant configuration. To update this configuration you need access to the Zuul instance
or ask an administrator for help.</p>
<p>We assume that Zuul knows about your repository so we can get started. There are three
topics that you should know about. To get jobs running you need the &quot;job&quot; itself. Jobs run
within a &quot;pipeline&quot;. The third important thing is to provide a &quot;project&quot; definition.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="where-to-save-the-zuul-relevant-data">Where to save the Zuul relevant data?<a href="#where-to-save-the-zuul-relevant-data" class="hash-link" aria-label="Direct link to Where to save the Zuul relevant data?" title="Direct link to Where to save the Zuul relevant data?" translate="no">​</a></h2>
<p>Zuul will parse all branches of the untrusted repositories that Zuul knows about.
Your repository is most likely an untrusted one since only the configuration repositories should
have the &quot;trusted&quot; state.
So it doesn&#x27;t matter whether you have just one branch containing Zuul files or all branches. Zuul
is looking for the following pathes on your repositories root.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">./zuul.yaml # everything is in here</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./.zuul.yaml # ... or here</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./zuul.d/ # use directory style to get a bit of a structure</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── jobs.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└── project.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./.zuul.d/ # the same as before just hidden</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── jobs.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└── project.yaml</span><br></span></code></pre></div></div>
<p>Just use exactly one of the four possibilities.</p>
<p>If using the directory style configuration all <code>yaml</code> files within this directory will be
processed. If your projects configuration is small enough you may put all information in
a single file called <code>zuul.yaml</code>. It is also possible to create the file or the directory
with a leading dot to hide them for non zuul related work within the repository.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="projects">Projects<a href="#projects" class="hash-link" aria-label="Direct link to Projects" title="Direct link to Projects" translate="no">​</a></h3>
<p>If Zuul is configured to observe your repository it will have a look at your projects
definition. Minimal example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">project</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">org/my</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">repo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">default-branch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">merge-mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;squash-merge&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">my_pipeline1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">jobs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> my_job1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> my_job2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">my_pipeline2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">jobs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> my_jobs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>By default Zuul will observe all branches for such files. We have to set the repository name
that have to match the exact value that was set for Zuul. Set a default-branch where actions
that don&#x27;t match an explicit branch are executed on. Set the merge-mode that Zuul has to use.
But beware that not all issue tracker support all methods. For github squash-merge will work.</p>
<p>After these three properties add the pipelines you want to use to the project definition.
With the <code>jobs</code> list you define which jobs to run in which pipeline.</p>
<p><a href="https://zuul-ci.org/docs/zuul/latest/config/project.html" target="_blank" rel="noopener noreferrer" class="">See official documentation</a></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pipelines">Pipelines<a href="#pipelines" class="hash-link" aria-label="Direct link to Pipelines" title="Direct link to Pipelines" translate="no">​</a></h3>
<p>Every Zuul instance will have at least one repository that is used for configuration. There
you will find the available pipelines. Pipelines are used to run your jobs on a periodic or
event driven base. Pipelines can be used to run other pipelines and to keep your jobs in a
defined order if you need this.</p>
<p>Have a look at the configuration repository to utilize the pipelines for your repository.
See available <a href="https://github.com/SovereignCloudStack/zuul-config/blob/main/zuul.d/gh_pipelines.yaml" target="_blank" rel="noopener noreferrer" class="">pipelines</a> for SCS.
You are not able to define new pipelines outside of a so called &quot;configuration&quot; repository. Since,
by default your repo is considered &quot;untrusted&quot;. So in the first place you don&#x27;t need to
think about, how to create a pipeline. Just use one that fits your needs as close as possible. Next you will
find an enumeration and a small description about the available pipelines in SCS Zuul.</p>
<p>Pipelines available in SCS Zuul:</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-check">1. check<a href="#1-check" class="hash-link" aria-label="Direct link to 1. check" title="Direct link to 1. check" translate="no">​</a></h4>
<ul>
<li class="">event driven pipeline</li>
<li class="">runs if a pull request is created, changed or reopened</li>
<li class="">re-runs if a comment contains <code>recheck</code></li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-gate">2. gate<a href="#2-gate" class="hash-link" aria-label="Direct link to 2. gate" title="Direct link to 2. gate" translate="no">​</a></h4>
<ul>
<li class="">event driven pipeline</li>
<li class="">trigger events: pull_request_review, pull_request, check_run</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-post">3. post<a href="#3-post" class="hash-link" aria-label="Direct link to 3. post" title="Direct link to 3. post" translate="no">​</a></h4>
<ul>
<li class="">event driven pipeline</li>
<li class="">trigger event: post</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-tag">4. tag<a href="#4-tag" class="hash-link" aria-label="Direct link to 4. tag" title="Direct link to 4. tag" translate="no">​</a></h4>
<ul>
<li class="">event driven pipeline</li>
<li class="">trigger event: push</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="5-e2e-test">5. e2e-test<a href="#5-e2e-test" class="hash-link" aria-label="Direct link to 5. e2e-test" title="Direct link to 5. e2e-test" translate="no">​</a></h4>
<ul>
<li class="">event driven pipeline</li>
<li class="">trigger event: pull_request</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="6-e2e-quick-test">6. e2e-quick-test<a href="#6-e2e-quick-test" class="hash-link" aria-label="Direct link to 6. e2e-quick-test" title="Direct link to 6. e2e-quick-test" translate="no">​</a></h4>
<ul>
<li class="">event driven pipeline</li>
<li class="">trigger event: pull_request</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="7-unlabel-on-update-e2e-test">7. unlabel-on-update-e2e-test<a href="#7-unlabel-on-update-e2e-test" class="hash-link" aria-label="Direct link to 7. unlabel-on-update-e2e-test" title="Direct link to 7. unlabel-on-update-e2e-test" translate="no">​</a></h4>
<ul>
<li class="">event driven pipeline</li>
<li class="">trigger event: pull_request</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="8-unlabel-on-update-e2e-quick-test">8. unlabel-on-update-e2e-quick-test<a href="#8-unlabel-on-update-e2e-quick-test" class="hash-link" aria-label="Direct link to 8. unlabel-on-update-e2e-quick-test" title="Direct link to 8. unlabel-on-update-e2e-quick-test" translate="no">​</a></h4>
<ul>
<li class="">event driven pipeline</li>
<li class="">trigger event: pull_request</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="9-periodic-hourly">9. periodic-hourly<a href="#9-periodic-hourly" class="hash-link" aria-label="Direct link to 9. periodic-hourly" title="Direct link to 9. periodic-hourly" translate="no">​</a></h4>
<ul>
<li class="">time based pipeline that runs every hour</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="10-periodic-daily">10. periodic-daily<a href="#10-periodic-daily" class="hash-link" aria-label="Direct link to 10. periodic-daily" title="Direct link to 10. periodic-daily" translate="no">​</a></h4>
<ul>
<li class="">time based pipeline that runs every day at 3 o&#x27;clock am.</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="11-compliance_check">11. compliance_check<a href="#11-compliance_check" class="hash-link" aria-label="Direct link to 11. compliance_check" title="Direct link to 11. compliance_check" translate="no">​</a></h4>
<ul>
<li class="">time based pipeline that runs every 15 minutes</li>
</ul>
<p>If you want to know more about pipelines: <a href="https://zuul-ci.org/docs/zuul/latest/config/pipeline.html" target="_blank" rel="noopener noreferrer" class="">See official documentation</a></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="reports">Reports<a href="#reports" class="hash-link" aria-label="Direct link to Reports" title="Direct link to Reports" translate="no">​</a></h3>
<p>The SCS Zuul instance can transmit build reports through an MQTT connection
to the dedicated Matrix chat room <code>SCS | Zuul Reports</code>. Currently, this MQTT reporting
feature is activated for periodic pipelines (periodic-hourly, periodic-daily,
compliance_check), and reports are dispatched solely in the event of
failures occurring in builds triggered by the mentioned pipelines.</p>
<p>See an example pipeline that reports failed result to the <code>SCS | Zuul Reports</code> Matrix room:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">pipeline</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> pipeline</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">that</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">reports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">matrix</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">      In the event of a failure, this pipeline transmits reports to</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">      the SCS | Zuul Reports Matrix chat room.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">failure</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">mqtt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">topic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;zuul/{pipeline}/{project}/{branch}/{change}&quot;</span><br></span></code></pre></div></div>
<p>Visit the <a href="https://zuul-ci.org/docs/zuul/latest/config/pipeline.html#reporters" target="_blank" rel="noopener noreferrer" class="">official Zuul documentation</a>
and explore the configuration options available for Zuul&#x27;s reporters.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="jobs">Jobs<a href="#jobs" class="hash-link" aria-label="Direct link to Jobs" title="Direct link to Jobs" translate="no">​</a></h3>
<p>All jobs that your Zuul instances knows of can be used for your own purposes.
Call them directly or implement a job that uses an existing job as parent.
Didn&#x27;t find the right job? Than we have to create a new one. Existing jobs
can be found in the web ui of your Zuul instance: <a href="https://zuul.scs.community/t/SCS/jobs" target="_blank" rel="noopener noreferrer" class="">Example</a></p>
<p>First have a look on a basic job example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">job</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> base</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">parent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">      The recommended base job.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      All jobs ultimately inherit from this.  It runs a pre</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">playbook</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      which copies all of the job&#x27;s prepared git repos on to all of</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      the nodes in the nodeset.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      It also sets a default timeout value (which may be overidden).</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">pre-run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> playbooks/base/pre.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">post-run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> playbooks/base/post.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> playbooks/base/post</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">logs.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">roles</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">zuul</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> zuul/zuul</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">jobs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">timeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1800</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">nodeset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">nodes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">jammy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">label</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">jammy</span><br></span></code></pre></div></div>
<p>Each job needs a name that has to be unique within the whole tenant.
A useful convention to achieve this is to prepend the name of the repository.
Each job need to define whether there is parent job or not.
Jobs without a parent are called &quot;base&quot; jobs. Usually you don&#x27;t want to implement base jobs since
there are already some base jobs that implement often used stuff. A description may not be mandatory
but is obviously useful.</p>
<p>Necessary for Zuul to do anything you just need to add a <code>run</code> or <code>roles</code> property. Within a job that is
like a <code>noop</code> job or just printing something to stdout that is everything you need to run your first job.
Since anything we want to do requires a little bit more you have to define a nodeset. The nodes
are used to run your playbooks on. In 99,9% you will need this too.</p>
<p>The properties <code>pre-run</code> and <code>post-run</code> are useful for bootstrap and cleanup. If your actual job wants to create
bootstrap some infrastructure you can to this in the <code>pre-run</code>. Using an cloud provider you want to release
no longer used resources. That can be done in the <code>post-run</code>. If you are using a parent job it is likely
that the parent job may has pre- and post-run playbooks. In this case your pre- and post-run playbooks are
&quot;nested&quot;. Example:</p>
<ol>
<li class="">pre-run parent</li>
<li class="">pre-run my job</li>
<li class="">post-run my job</li>
<li class="">post-run parent</li>
</ol>
<p>If your job exceeds the defined timeout, the job is considered as failed.</p>
<p><a href="https://zuul-ci.org/docs/zuul/latest/config/job.html" target="_blank" rel="noopener noreferrer" class="">See official documentation</a></p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-about-secrets">What about secrets?<a href="#what-about-secrets" class="hash-link" aria-label="Direct link to What about secrets?" title="Direct link to What about secrets?" translate="no">​</a></h4>
<p>Right now you should be able to run basic tasks. But what if you try to test something
that needs credentials to connect to an outside service? Or you have to address additional
ressources in an openstack environment and you have to use something like app credentials?</p>
<p>That is where job secrets are used. Example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">job</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> SOME_JOB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">parent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> base</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">      A job basic job used as example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">secrets</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> clouds_conf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">secret</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> app_credential_cloud_conf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> playbooks/my</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">playbook.yaml</span><br></span></code></pre></div></div>
<p>Secrets for a job are simply defined by the keyword <code>secrets</code>.
Each secret needs a name that can be used in your playbooks.
The property <code>secret</code> references the secret that is defined within your project.</p>
<p><strong>ATTENTION!</strong> If your job is using a secret <code>job.post-review</code> is automatically
set to <code>true</code>. For untrusted projects, that means that your job is only called
in piplines that have the <code>pipeline.post-review</code> flag set to <code>true</code>. In SCS context
that means you may run these jobs only with the pipelines <code>tag</code> and <code>post</code>.</p>
<p>If you want to run jobs on pipelines that have <code>post-review</code> set to <code>false</code>, which
is default, and your job needs a secret, the secret may be defined in the zuul-config repository.</p>
<p>Example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">secret</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> app_credential_cloud_conf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">credentials</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">secret</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">value</span><br></span></code></pre></div></div>
<p>Within <code>my-playbook.yaml</code> you can reference the secret value using <code>&quot;{{ clouds_conf.credentials }}&quot;</code>.
In this example <code>my-secret-value</code> is clear readable text. That is not something we want to keep
secrets. But how do you encrypt secrets in a way that they are secure and also can be decrypted by
Zuul?</p>
<p>For this purpose Zuul creates its own public/private key pair for each project. Everyone may use the
public key to create secrets. But only Zuul will be able to decrypt these values. To avoid the user
to be responsible for the correct encryption there is an zuul-client tool that will do this for you.</p>
<p>Example (reading from stdin and writing to stdout):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">zuul-client --zuul-url ZUUL_URL encrypt --tenant SCS --project SovereignCloudStack/REPO</span><br></span></code></pre></div></div>
<p>Add <code>--infile INFILE</code> or <code>--outfile OUTFILE</code> if you prefer to work with files directly.</p>
<p>The output might look like this:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">secret</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">&lt;fieldname&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token tag" style="color:rgb(255, 121, 198)">!encrypted/pkcs1-oaep</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> IGZ2Wu47R9mEY4fjetbxSAUGNaz4HR1mjk9lCLq3HsUMjHGj9YPlb2MvnPQw1LCJSvpaK</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          ogth7hi2zYwrs5tNAik/qlVSB7AM+LQRP7lmlM4JmD6WOyR7DisHu7oMD1Gqem2ZuMggA</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          DIBn5+DeBIvnwihDOcS+BKPTVMEtXOJNkuObZHE8DweB/RQIGUvjyeq5yoAmz/y+qGVqe</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          0Vk4pTYFIBgk5DMzwVnDzDkqs/QokoOupMUoBcpapmM11do4ymjbDpeINjayoro6VXTtX</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          Mkk9fDv9wuJIQTuyHAOfMD+UYS/HqVSF/Hm9ScUvfhw02gTdzKCxliWhFHJOj7RbdUUMK</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          OYYcUkNp5cXZUYFnflMhxVEnzREbdAIklNPfoHOizsxLPaUZ9yk6XcFRflFfMvqBtUS00</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          LCx0Uh906NwdaEUrv2ZdrN123rwfwfw4333232rDFDFfsdfddsfdDFSFSdqrrtwms5Mi0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          szUBaM4j+Mayep+41vl0cpsLU91GzXEATWMaPIN8OnEHF6qQIv0wB6VaKd5aeAyERisb3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          wFdjEo4faLO70RWzR33k+4xqAYNIIFyTMpWJz21CUSfoYG8ygL6t7RJGgyjA+0KsVEyj+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          ewEtiaUOLYyD7pXtqdw1HgzjqiXnfxk+wSv/y5y/TGGYpQj8zU76jS7Zj0ft/0=</span><br></span></code></pre></div></div>
<p>You may use this content or the file to provide it as a secret. You just have to update the <code>&lt;name&gt;</code> and the
<code>&lt;fieldname&gt;</code> part.</p>
<p>The secret name has to be unique across all projects. Because of this, we have a naming convention in the
<code>SovereignCloudStack</code> organisation that ensures that a secret has a unique name.</p>
<p>Our convention is as follows. There is only one secret per Zuul configuration per project (for exceptions,
see below). This secret always has a name in the form
<code>SECRET_REPOSITORY_NAME</code>. For instance, if a secret in the <code>SovereignCloudStack/k8s-cluster-api-provider</code>
repository is
to be used, it is given the name <code>SECRET_K8S_CLUSTER_API_PROVIDER</code>. The name of the repository is
always written in capital letters. A dash is replaced with an underscore. Any number of values
(<code>&lt;fieldname&gt;: !encrypted/pkcs1-oaep</code>) can then be assigned to this one secret.</p>
<p>In certain cases, it can be undesireable to expose all secret information to all jobs in a project.
Then additional secrets may be used, whose names have to be formed by appending an underscore and some
upper-case prefix to the name of the primary secret. For instance, we might use the
name <code>SECRET_REPOSITORY_NAME_FOOBAR</code>.</p>
<p>Official documentation:</p>
<ol>
<li class=""><a href="https://zuul-ci.org/docs/zuul/latest/config/secret.html#secret" target="_blank" rel="noopener noreferrer" class="">Secrets documentation</a></li>
<li class=""><a href="https://zuul-ci.org/docs/zuul/latest/project-config.html#encryption" target="_blank" rel="noopener noreferrer" class="">Encryption documentation</a></li>
</ol>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="lets-put-it-all-together">Let&#x27;s put it all together<a href="#lets-put-it-all-together" class="hash-link" aria-label="Direct link to Let&#x27;s put it all together" title="Direct link to Let&#x27;s put it all together" translate="no">​</a></h4>
<p>For a basic but working example the following content may be written into a <code>zuul.yaml</code> file.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># zuul.yaml content</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">secret</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> SECRET_REPOSITORY_NAME</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">secretValue1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token tag" style="color:rgb(255, 121, 198)">!encrypted/pkcs1-oaep</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> &lt;ENCRYPTED_DATA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">secretValue2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token tag" style="color:rgb(255, 121, 198)">!encrypted/pkcs1-oaep</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> &lt;ENCRYPTED_DATA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">secretValue3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token tag" style="color:rgb(255, 121, 198)">!encrypted/pkcs1-oaep</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> &lt;ENCRYPTED_DATA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">job</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> myFirstTestJob</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">parent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> base</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">secrets</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> secretName </span><span class="token comment" style="color:rgb(98, 114, 164)"># The name of the secret that is used within &quot;playbooks/testPlaybook.yaml&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">secret</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> SECRET_REPOSITORY_NAME</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> playbooks/testPlaybook.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">job</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mySecondTestJob</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">parent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> base</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> playbooks/testPlaybookTwo.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">project</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">tag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">jobs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> myFirstTestJob</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">check</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">jobs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> mySecondTestJob</span><br></span></code></pre></div></div>
<p>This will run the job <code>myFirstTestJob</code> whenever the <code>tag</code> pipeline is triggered, and
<code>mySecondTestJob</code> whenever <code>check</code> is triggered.</p>
<p>Within SCS the <code>check</code> pipeline is always triggered if you open, change or reopen a pull request.
This pipeline can also be triggered manually if you write a comment on an already
existing pull request and place the string <code>recheck</code> in it.</p>
<p>Recall that the first test job cannot run on the same pipeline because it uses a secret.
The <code>tag</code> pipeline is run whenever a new tag is created.</p>
<p>The path to you playbook is always the full path within the repository. The playbook
contains the tasks you actually want to run on all or a specific subset of nodes.
Example playbook:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># playbooks/testPlaybook.yaml content</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">hosts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> all</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">tasks</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">debug</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">msg</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Debug print my secrets! {{ secretName.secretValue1 }}&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># do not do this as it will expose your secrets</span><br></span></code></pre></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/contributor-docs/operations/iam/openstack-federation-via-oidc"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">OpenStack Federation via OpenID-Connect</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#who-is-it-for" class="table-of-contents__link toc-highlight">Who is it for?</a></li><li><a href="#where-do-i-start" class="table-of-contents__link toc-highlight">Where do I start?</a></li><li><a href="#where-to-save-the-zuul-relevant-data" class="table-of-contents__link toc-highlight">Where to save the Zuul relevant data?</a><ul><li><a href="#projects" class="table-of-contents__link toc-highlight">Projects</a></li><li><a href="#pipelines" class="table-of-contents__link toc-highlight">Pipelines</a></li><li><a href="#reports" class="table-of-contents__link toc-highlight">Reports</a></li><li><a href="#jobs" class="table-of-contents__link toc-highlight">Jobs</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">Contribute</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://matrix.to/#/!TiDqlLmEUaXqTemaLc:matrix.org?via=matrix.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Matrix<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://fosstodon.org/@sovereigncloudstack" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mastodon<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/SovereignCloudStack/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Sovereign Cloud Stack, SCS and the logo are registered trademarks of the Open Source Business Alliance e.V. — Other trademarks are property of their respective owners.</div></div></div></footer></div>
</body>
</html>