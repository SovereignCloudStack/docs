"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[47191],{50896:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"scs-0117-v1-volume-backup-service","title":"Volume Backup Functionality","description":"Introduction","source":"@site/standards/scs-0117-v1-volume-backup-service.md","sourceDirName":".","slug":"/scs-0117-v1-volume-backup-service","permalink":"/standards/scs-0117-v1-volume-backup-service","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Volume Backup Functionality","type":"Standard","status":"Stable","stabilized_at":"2024-11-13T00:00:00.000Z","track":"IaaS"},"sidebar":"standards","previous":{"title":"scs-0117: Volume Backup Functionality","permalink":"/standards/iaas/scs-0117"},"next":{"title":"scs-0118: SCS Taxonomy of Failsafe Levels","permalink":"/standards/iaas/scs-0118"}}');var s=t(74848),r=t(28453);const i={title:"Volume Backup Functionality",type:"Standard",status:"Stable",stabilized_at:new Date("2024-11-13T00:00:00.000Z"),track:"IaaS"},o=void 0,c={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Terminology",id:"terminology",level:2},{value:"Motivation",id:"motivation",level:2},{value:"Design Considerations",id:"design-considerations",level:2},{value:"Options considered",id:"options-considered",level:3},{value:"Only recommend volume backup feature, use images as alternative",id:"only-recommend-volume-backup-feature-use-images-as-alternative",level:4},{value:"Focus on feature availability, make feature mandatory",id:"focus-on-feature-availability-make-feature-mandatory",level:4},{value:"Focus on backup reliability, make separate backend mandatory",id:"focus-on-backup-reliability-make-separate-backend-mandatory",level:4},{value:"Standard",id:"standard",level:2},{value:"Related Documents",id:"related-documents",level:2},{value:"Conformance Tests",id:"conformance-tests",level:2}];function d(e){const a={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.h2,{id:"introduction",children:"Introduction"}),"\n",(0,s.jsx)(a.p,{children:"OpenStack offers a variety of resources where users are able to transfer and store data in the infrastructure.\nA prime example of these resources are volumes which are attached to virtual machines as virtual block storage devices.\nAs such they carry potentially large amounts of user data which is constantly changing at runtime.\nIt is important for users to have the ability to create backups of this data in a reliable and effifcient manner."}),"\n",(0,s.jsx)(a.h2,{id:"terminology",children:"Terminology"}),"\n",(0,s.jsxs)(a.table,{children:[(0,s.jsx)(a.thead,{children:(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.th,{children:"Term"}),(0,s.jsx)(a.th,{children:"Meaning"})]})}),(0,s.jsxs)(a.tbody,{children:[(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"CSP"}),(0,s.jsx)(a.td,{children:"Cloud Service Provider, provider managing the OpenStack infrastructure"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"IaaS"}),(0,s.jsx)(a.td,{children:"Abbreviation for Infrastructure as a Service"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"Image"}),(0,s.jsx)(a.td,{children:"IaaS resource representing a snapshot of a block storage disk, can be used to create Volumes"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"Volume"}),(0,s.jsx)(a.td,{children:"IaaS resource representing a virtual block storage device that can be attached as a disk to virtual machines"})]})]})]}),"\n",(0,s.jsx)(a.h2,{id:"motivation",children:"Motivation"}),"\n",(0,s.jsxs)(a.p,{children:["The ",(0,s.jsx)(a.a,{href:"https://docs.openstack.org/cinder/latest/admin/volume-backups.html",children:"volume backup functionality of the Block Storage API"})," is a feature that is not available in all clouds per default, e.g., in OpenStack.\nThe feature requires a backend to be prepared and configured correctly before it can be used.\nIn the Block Storage service, the backup storage backend is usually configured separately from the storage backend of the general volume service and may not be mandatory.\nThus, an arbitrary cloud may or may not offer the backup feature in the Block Storage API."]}),"\n",(0,s.jsx)(a.p,{children:"This standard aims to make this functionality the default in SCS clouds so that customers can expect the feature to be usable."}),"\n",(0,s.jsx)(a.h2,{id:"design-considerations",children:"Design Considerations"}),"\n",(0,s.jsx)(a.p,{children:"The standard should make sure that the feature is available and usable but should not limit the exact implementation (e.g. choice of backend driver) any further than necessary."}),"\n",(0,s.jsx)(a.h3,{id:"options-considered",children:"Options considered"}),"\n",(0,s.jsx)(a.h4,{id:"only-recommend-volume-backup-feature-use-images-as-alternative",children:"Only recommend volume backup feature, use images as alternative"}),"\n",(0,s.jsx)(a.p,{children:"As an alternative to the volume backup feature of the Block Storage API, images can also be created based on volumes and act as a backup under certain circumstances.\nAs an option, this standard could keep the actual integration of the volume backup feature optional and guide users how to use images as backup targets instead in case the feature is unavailable."}),"\n",(0,s.jsx)(a.p,{children:"However, it is not guaranteed that the image backend storage is separate from the volume storage.\nFor instance, both could be using the same Ceph cluster.\nIn such case, the images would not count as genuine backups."}),"\n",(0,s.jsx)(a.p,{children:"Although users are able to download images and transfer them to a different storage location, this approach might also prove unfeasible depending on the image size and the existence (or lack) of appropriate target storage on the user side."}),"\n",(0,s.jsx)(a.p,{children:"Furthermore, incremental backups are not possible when creating images from volumes either.\nThis results in time-consuming backup operations of fully copying a volume everytime a backup is created."}),"\n",(0,s.jsx)(a.h4,{id:"focus-on-feature-availability-make-feature-mandatory",children:"Focus on feature availability, make feature mandatory"}),"\n",(0,s.jsx)(a.p,{children:"This option is pretty straightforward.\nIt would make the volume backup feature mandatory for SCS clouds.\nThis way users can expect the feature to be available and usable."}),"\n",(0,s.jsx)(a.p,{children:"With this, users can leverage functionalities like incremental backups and benefit from optimized performance of the backup process due to the tight integration with the volume service."}),"\n",(0,s.jsx)(a.p,{children:"However, it does not seem feasible to also mandate having a separate storage backend for volume backups at the same time due to potential infrastructure limitations at CSP-side making it hard or even impossible to offer.\nAs such, the actual benefit of backups in terms of reliability and security aspects would be questionable if a separate storage backend is not mandated and therefore not guaranteed."}),"\n",(0,s.jsx)(a.p,{children:"This approach would focus on feature availability rather than backup reliability."}),"\n",(0,s.jsx)(a.h4,{id:"focus-on-backup-reliability-make-separate-backend-mandatory",children:"Focus on backup reliability, make separate backend mandatory"}),"\n",(0,s.jsx)(a.p,{children:"As an alternative, the volume backup feature availability could be made optional but in case a CSP chooses to offer it, the standard would mandate a separate storage backend to be used for volume backups.\nThis way, failures of the volume storage backend would not directly impact the availability and safety of volume backups, making them actually live up to their name."}),"\n",(0,s.jsx)(a.p,{children:"In contrast to the above, this approach would focus on backup reliability rather than feature availability."}),"\n",(0,s.jsx)(a.h2,{id:"standard",children:"Standard"}),"\n",(0,s.jsx)(a.p,{children:"This standard decides to go with the second option and makes the volume backup feature mandatory in the following way:"}),"\n",(0,s.jsxs)(a.p,{children:["In an SCS cloud, the volume backup functionality MUST be configured properly and its API as defined per ",(0,s.jsx)(a.code,{children:"/v3/{project_id}/backups"})," MUST be offered to customers.\nIf using Cinder, a suitable ",(0,s.jsx)(a.a,{href:"https://docs.openstack.org/cinder/latest/configuration/block-storage/backup-drivers.html",children:"backup driver"})," MUST be set up."]}),"\n",(0,s.jsx)(a.p,{children:"The volume backup target storage SHOULD be a separate storage system from the one used for volumes themselves."}),"\n",(0,s.jsx)(a.h2,{id:"related-documents",children:"Related Documents"}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsx)(a.li,{children:(0,s.jsx)(a.a,{href:"https://docs.openstack.org/api-ref/block-storage/v3/index.html#backups-backups",children:"OpenStack Block Storage v3 Backup API reference"})}),"\n",(0,s.jsx)(a.li,{children:(0,s.jsx)(a.a,{href:"https://docs.openstack.org/cinder/latest/configuration/block-storage/backup-drivers.html",children:"OpenStack Volume Backup Drivers"})}),"\n"]}),"\n",(0,s.jsx)(a.h2,{id:"conformance-tests",children:"Conformance Tests"}),"\n",(0,s.jsxs)(a.p,{children:["Conformance tests include using the ",(0,s.jsx)(a.code,{children:"/v3/{project_id}/backups"})," Block Storage API endpoint to create a volume and a backup of it as a non-admin user and subsequently restore the backup on a new volume while verifying the success of each operation.\nThese tests verify the mandatory part of the standard: providing the Volume Backup API."]}),"\n",(0,s.jsxs)(a.p,{children:["There is a test suite in ",(0,s.jsx)(a.a,{href:"https://github.com/SovereignCloudStack/standards/blob/main/Tests/iaas/volume-backup/volume-backup-tester.py",children:(0,s.jsx)(a.code,{children:"volume-backup-tester.py"})}),".\nThe test suite connects to the OpenStack API and executes basic operations using the volume backup API to verify that the functionality requested by the standard is available.\nPlease consult the associated ",(0,s.jsx)(a.a,{href:"https://github.com/SovereignCloudStack/standards/blob/main/Tests/iaas/volume-backup/README.md",children:"README.md"})," for detailed setup and testing instructions."]}),"\n",(0,s.jsx)(a.p,{children:"Note that these tests don't verify the optional part of the standard: providing a separate storage backend for Cinder volume backups.\nThis cannot be checked from outside of the infrastructure as it is an architectural property of the infrastructure itself and transparent to customers."})]})}function u(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,a,t)=>{t.d(a,{R:()=>i,x:()=>o});var n=t(96540);const s={},r=n.createContext(s);function i(e){const a=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),n.createElement(r.Provider,{value:a},e.children)}}}]);