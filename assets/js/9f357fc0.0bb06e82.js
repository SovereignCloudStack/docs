"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[83292],{99590:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>i,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"container/components/cluster-stacks/components/cluster-stack-operator/topics/quickstart","title":"Getting Started","description":"Quickstart","source":"@site/docs/03-container/components/cluster-stacks/components/cluster-stack-operator/topics/quickstart.md","sourceDirName":"03-container/components/cluster-stacks/components/cluster-stack-operator/topics","slug":"/container/components/cluster-stacks/components/cluster-stack-operator/topics/quickstart","permalink":"/docs/container/components/cluster-stacks/components/cluster-stack-operator/topics/quickstart","draft":false,"unlisted":false,"editUrl":"https://github.com/SovereignCloudStack/docs/tree/main/docs/03-container/components/cluster-stacks/components/cluster-stack-operator/topics/quickstart.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Overview","permalink":"/docs/container/components/cluster-stacks/components/cluster-stack-operator/architecture/overview"},"next":{"title":"Troubleshooting","permalink":"/docs/container/components/cluster-stacks/components/cluster-stack-operator/topics/troubleshoot"}}');var n=s(74848),c=s(28453);const a={},o="Getting Started",i={},l=[{value:"Quickstart",id:"quickstart",level:2},{value:"Installation",id:"installation",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Cluster API",id:"cluster-api",level:4},{value:"Configure Release Source",id:"configure-release-source",level:3},{value:"Using GitHub Releases",id:"using-github-releases",level:4},{value:"Using OCI Registry",id:"using-oci-registry",level:4},{value:"Install Cluster Stack Operator",id:"install-cluster-stack-operator",level:3},{value:"Install by manifest",id:"install-by-manifest",level:4},{value:"Enable OCI registry as source",id:"enable-oci-registry-as-source",level:5},{value:"Install with Helm (experimental)",id:"install-with-helm-experimental",level:4}];function u(e){const t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"getting-started",children:"Getting Started"})}),"\n",(0,n.jsx)(t.h2,{id:"quickstart",children:"Quickstart"}),"\n",(0,n.jsxs)(t.p,{children:["Currently, there is a ",(0,n.jsx)(t.a,{href:"https://github.com/SovereignCloudStack/cluster-stacks-demo",children:"demo"})," that can be used to see how the Cluster Stack approach can work. It uses the Docker Provider Integration for Cluster API."]}),"\n",(0,n.jsx)(t.h2,{id:"installation",children:"Installation"}),"\n",(0,n.jsx)(t.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"- clusterctl\n- envsubst\n- kubectl\n- Helm (optional)\n"})}),"\n",(0,n.jsx)(t.h4,{id:"cluster-api",children:"Cluster API"}),"\n",(0,n.jsxs)(t.p,{children:["We assume access to a Kubernetes cluster. To start\n",(0,n.jsx)(t.a,{href:"https://kind.sigs.k8s.io/",children:"kind"})," can be used for that.\nThis Kubernetes cluster must act as Cluster API management cluster.\nIf not already done, to make your Kubernetes cluster a management cluster by\ninstalling the Cluster API objects, you can do"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"clusterctl init\n"})}),"\n",(0,n.jsx)(t.h3,{id:"configure-release-source",children:"Configure Release Source"}),"\n",(0,n.jsx)(t.p,{children:"The Cluster Stack Operator downloads Cluster Stack releases either from GitHub\nReleases or from an OCI registry.\nDepending on which method is preferred, environment variables must be set to\ngive the Cluster Stack Operator access to the specific source."}),"\n",(0,n.jsx)(t.h4,{id:"using-github-releases",children:"Using GitHub Releases"}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsxs)(t.p,{children:["Be aware that GitHub enforces limitations on the number of API requests per\nunit of time. To overcome this, it is recommended to configure a ",(0,n.jsx)(t.a,{href:"https://github.com/settings/personal-access-tokens/new",children:"personal\naccess token"})," for\nauthenticated calls. This will significantly increase the rate limit for GitHub\nAPI requests. Fine grained PAT with ",(0,n.jsx)(t.code,{children:"Public Repositories (read-only)"})," is\nenough."]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["Following variables tells the Cluster Stack Operator to look for releases in\n",(0,n.jsx)(t.code,{children:"https://github.com/SovereignCloudStack/cluster-stacks"})]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"export GIT_PROVIDER_B64=Z2l0aHVi  # github\nexport GIT_ORG_NAME_B64=U292ZXJlaWduQ2xvdWRTdGFjaw== # SovereignCloudStack\nexport GIT_REPOSITORY_NAME_B64=Y2x1c3Rlci1zdGFja3M=  # cluster-stacks\nexport GIT_ACCESS_TOKEN_B64=$(echo -n '<my-personal-access-token>' | base64 -w0)\n"})}),"\n",(0,n.jsx)(t.h4,{id:"using-oci-registry",children:"Using OCI Registry"}),"\n",(0,n.jsxs)(t.p,{children:["Following variables tells the Cluster Stack Operator to look for releases in\n",(0,n.jsx)(t.code,{children:"https://registry.scs.community/kaas/cluster-stacks"})]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"export OCI_REGISTRY_B64=cmVnaXN0cnkuc2NzLmNvbW11bml0eQ== # registry.scs.community\nexport OCI_REPOSITORY_B64=cmVnaXN0cnkuc2NzLmNvbW11bml0eS9rYWFzL2NsdXN0ZXItc3RhY2tzCg== # registry.scs.community/kaas/cluster-stacks\n"})}),"\n",(0,n.jsxs)(t.p,{children:["If the registry is not public the Cluster Stack Operator please also provide\n",(0,n.jsx)(t.code,{children:"OCI_USERNAME_B64"})," and ",(0,n.jsx)(t.code,{children:"OCI_PASSWORD_B64"})," or\n",(0,n.jsx)(t.code,{children:"OCI_ACCESS_TOKEN_B64"})]}),"\n",(0,n.jsx)(t.h3,{id:"install-cluster-stack-operator",children:"Install Cluster Stack Operator"}),"\n",(0,n.jsx)(t.h4,{id:"install-by-manifest",children:"Install by manifest"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"# Get the latest CSO release version and apply CSO manifests\ncurl -sSL https://github.com/SovereignCloudStack/cluster-stack-operator/releases/latest/download/cso-infrastructure-components.yaml | envsubst | kubectl apply -f -\n"})}),"\n",(0,n.jsx)(t.h5,{id:"enable-oci-registry-as-source",children:"Enable OCI registry as source"}),"\n",(0,n.jsx)(t.p,{children:"Since GitHub is set as default source for the Cluster Stack releases, this can be changed with a patch:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:'kubectl patch deployment -n cso-system cso-controller-manager --type=\'json\' -p=\'[{"op": "replace", "path": "/spec/template/spec/containers/0/command", "value": ["/manager", "-source", "oci"]}]\'\n'})}),"\n",(0,n.jsx)(t.h4,{id:"install-with-helm-experimental",children:"Install with Helm (experimental)"}),"\n",(0,n.jsx)(t.p,{children:"There are simple Helm charts available which were created especially to make the switch between the sources easier."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"helm upgrade -i cso -n cso-system \\\n    --create-namespace oci://registry.scs.community/cluster-stacks/cso \\\n    --set controllerManager.manager.source=oci \\\n    --set clusterStackVariables.ociRepository=registry.scs.community/kaas/cluster-stacks\n"})})]})}function d(e={}){const{wrapper:t}={...(0,c.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>o});var r=s(96540);const n={},c=r.createContext(n);function a(e){const t=r.useContext(c);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),r.createElement(c.Provider,{value:t},e.children)}}}]);