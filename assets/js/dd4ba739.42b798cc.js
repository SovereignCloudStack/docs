"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[27425],{31097:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"scs-0116-w1-key-manager-implementation-testing","title":"SCS Key Manager Standard: Implementation and Testing Notes","description":"Implementation","source":"@site/standards/scs-0116-w1-key-manager-implementation-testing.md","sourceDirName":".","slug":"/scs-0116-w1-key-manager-implementation-testing","permalink":"/standards/scs-0116-w1-key-manager-implementation-testing","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"SCS Key Manager Standard: Implementation and Testing Notes","type":"Supplement","track":"IaaS","supplements":["scs-0116-v1-key-manager-standard.md"]},"sidebar":"standards","previous":{"title":"V1","permalink":"/standards/scs-0116-v1-key-manager-standard"},"next":{"title":"scs-0117: Volume Backup Functionality","permalink":"/standards/iaas/scs-0117"}}');var a=n(74848),i=n(28453);const r={title:"SCS Key Manager Standard: Implementation and Testing Notes",type:"Supplement",track:"IaaS",supplements:["scs-0116-v1-key-manager-standard.md"]},o=void 0,c={},l=[{value:"Implementation",id:"implementation",level:2},{value:"Policies",id:"policies",level:3},{value:"Automated Tests",id:"automated-tests",level:2},{value:"Manual Tests",id:"manual-tests",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",sup:"sup",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h2,{id:"implementation",children:"Implementation"}),"\n",(0,a.jsxs)(t.p,{children:["A Key Manager service can have different backends.\nFor Barbican these are called Plugins.\nThe standard plugin is ",(0,a.jsx)(t.code,{children:"simple_crypto"}),", which has the Master-KEK written in the Barbican config file.\nIn that case the Master-KEK needs additional protection.\nWhen the ",(0,a.jsx)(t.code,{children:"simple_crypto"})," plugin is used, securing the Master-KEK can be achieved through protection of the Barbican config e.g. through running Barbican in an enclave."]}),"\n",(0,a.jsx)(t.p,{children:"Another option to secure the Master-KEK would be using an HSM with a corresponding plugin in Barbican.\nIn that case the Master-KEK will be stored inside the HSM and encryption and decryption of the Project-KEKs will also happen in the HSM.\nThere are also software HSMs available, that should be tested for their integration into the Barbican workflow."}),"\n",(0,a.jsxs)(t.p,{children:["Other Plugins in Barbican are the KMIP plugin and Vault",(0,a.jsx)(t.sup,{children:(0,a.jsx)(t.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),".\nThey are storing the keys differently and CSPs need to make sure, that the access to the keys is configured securely."]}),"\n",(0,a.jsx)(t.admonition,{type:"tip",children:(0,a.jsx)(t.p,{children:"Barbican supports deploying out-of-tree drivers what enables operators to satisfy their specific needs."})}),"\n",(0,a.jsx)(t.h3,{id:"policies",children:"Policies"}),"\n",(0,a.jsxs)(t.p,{children:["When a Key Manager is used, but it uses the old policies and does not enforce the new secure RBAC work, the roles between Barbican and the other IaaS services differ.\nThis can be done with a small change in the policy.yaml file. The ",(0,a.jsx)(t.code,{children:"creator"})," has to be defined like this:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-yaml",children:'"creator": "role:member"\n'})}),"\n",(0,a.jsx)(t.h2,{id:"automated-tests",children:"Automated Tests"}),"\n",(0,a.jsx)(t.p,{children:"We implemented the following testcases, in accordance with the standard:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"scs-0116-presence"}),' ensures that a service of type "key-manager" occurs in the service catalog;']}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"scs-0116-permissions"})," ensures that a regular user has suitable access to the key-manager API."]}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["The testcases can be run using the script\n",(0,a.jsx)(t.a,{href:"https://github.com/SovereignCloudStack/standards/blob/main/Tests/iaas/openstack_test.py",children:(0,a.jsx)(t.code,{children:"openstack_test.py"})}),"."]}),"\n",(0,a.jsx)(t.h2,{id:"manual-tests",children:"Manual Tests"}),"\n",(0,a.jsx)(t.p,{children:"It is not possible to check a deployment for a correctly protected Master KEK automatically from the outside.\nEven audits would need to check the complete host for plain-text keys.\nCSPs are responsible for ensuring the protection of the Master KEK and they have to make at least their architecture for that protection auditable."}),"\n","\n",(0,a.jsxs)(t.section,{"data-footnotes":!0,className:"footnotes",children:[(0,a.jsx)(t.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{id:"user-content-fn-1",children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.a,{href:"https://docs.openstack.org/barbican/latest/install/barbican-backend.html",children:"Barbican Plugins"})," ",(0,a.jsx)(t.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var s=n(96540);const a={},i=s.createContext(a);function r(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);