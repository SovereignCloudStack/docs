"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[11362],{23920:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"scs-0115-v1-default-rules-for-security-groups","title":"Default Rules for Security Groups","description":"Introduction","source":"@site/standards/scs-0115-v1-default-rules-for-security-groups.md","sourceDirName":".","slug":"/scs-0115-v1-default-rules-for-security-groups","permalink":"/standards/scs-0115-v1-default-rules-for-security-groups","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Default Rules for Security Groups","type":"Standard","status":"Stable","stabilized_at":"2024-11-13T00:00:00.000Z","track":"IaaS"},"sidebar":"standards","previous":{"title":"scs-0115: Default Rules for Security Groups","permalink":"/standards/iaas/scs-0115"},"next":{"title":"scs-0116: SCS Key Manager Standard","permalink":"/standards/iaas/scs-0116"}}');var s=r(74848),a=r(28453);const o={title:"Default Rules for Security Groups",type:"Standard",status:"Stable",stabilized_at:new Date("2024-11-13T00:00:00.000Z"),track:"IaaS"},i=void 0,u={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Terminology",id:"terminology",level:2},{value:"Default Security Groups, Custom Security Groups and default Security Group Rules",id:"default-security-groups-custom-security-groups-and-default-security-group-rules",level:3},{value:"Motivation",id:"motivation",level:2},{value:"Design Considerations",id:"design-considerations",level:2},{value:"Further Annotations",id:"further-annotations",level:3},{value:"Standard",id:"standard",level:2},{value:"Example",id:"example",level:3},{value:"Related Documents",id:"related-documents",level:2},{value:"Conformance Tests",id:"conformance-tests",level:2}];function c(e){const t={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",sup:"sup",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,s.jsx)(t.p,{children:"Security Groups in IaaS (OpenStack) are part of the network security mechanisms provided for the users.\nThey resemble sets of virtual firewall rules allowing specific network traffic at a port of a VM that connects it to a network.\nThey are project-bound, which means that all Security Groups that are newly created are only available to the project in which they were created.\nThis is also the case for the default Security Group that is created for each project as soon as the project itself is created."}),"\n",(0,s.jsx)(t.h2,{id:"terminology",children:"Terminology"}),"\n",(0,s.jsx)(t.p,{children:"Security Group (abbr. SG)\nSet of ip table rules, used for tenant network security."}),"\n",(0,s.jsx)(t.p,{children:"Security Group Rule (abbr. SG Rule)\nA single ip table rule, that is part of a Security Group."}),"\n",(0,s.jsx)(t.p,{children:"Administrator (abbr. Admin)\nOperator = User of an OpenStack cloud with the admin role."}),"\n",(0,s.jsx)(t.h3,{id:"default-security-groups-custom-security-groups-and-default-security-group-rules",children:"Default Security Groups, Custom Security Groups and default Security Group Rules"}),"\n",(0,s.jsx)(t.p,{children:"To properly understand the concepts in this standard and avoid ambiguity, it is very important to distinguish between the following similar-sounding but different resources in the OpenStack Networking API:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"default Security Group"}),"\n",(0,s.jsx)(t.li,{children:"custom Security Group"}),"\n",(0,s.jsx)(t.li,{children:"default Security Group Rules"}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["A ",(0,s.jsx)(t.strong,{children:"default Security Group"}),' is a predefined Security Group which is automatically created once a project is created and is specific to that project.\nThis Security Group is called "default" and there exists only one per project.\nIt will automatically be assigned to VMs that have no other Security Group explicitly assigned to it, when a VM is created.']}),"\n",(0,s.jsxs)(t.p,{children:["A ",(0,s.jsx)(t.strong,{children:"custom Security Group"})," is any additional Security Group created within a project separate from the ",(0,s.jsx)(t.em,{children:"default Security Group"})," of the project."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.strong,{children:"default Security Group Rules"})," may target the ",(0,s.jsx)(t.em,{children:"default Security Groups"})," or the ",(0,s.jsx)(t.em,{children:"custom Security Groups"})," or both.\nThey resemble a rule template and each Security Group will be initially created with rules according to this template."]}),"\n",(0,s.jsx)(t.p,{children:"Although the rules of a Security Group may be adjusted freely after its creation, these default rule presets applied on initialization are predefined.\nIn recent OpenStack releases, both presets can be adjusted independently by administrators of the infrastructure."}),"\n",(0,s.jsx)(t.h2,{id:"motivation",children:"Motivation"}),"\n",(0,s.jsxs)(t.p,{children:["The rules of a Security Group can be edited by default by any user with the member role within a project.\nBut when a Security Group is created it automatically incorporates a few Security Group rules that are configured as default rules.\nSince the 2023.2 release, the default set of Security Group rules can be adjusted.\nThis functionality is only available to administrators",(0,s.jsx)(t.sup,{children:(0,s.jsx)(t.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),(0,s.jsx)(t.sup,{children:(0,s.jsx)(t.a,{href:"#user-content-fn-2",id:"user-content-fnref-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),".\nIn combination with the OpenStack behavior that when a VM is created with no Security Group specified, the default Security Group of the project is automatically applied to the ports of the VM,\na user cannot be sure which firewall rules are applied to such a VM."]}),"\n",(0,s.jsx)(t.p,{children:"Therefore, this standard proposes default Security Group rules that MUST be set by administrators to avoid divergence in default network security between different IaaS environments."}),"\n",(0,s.jsx)(t.h2,{id:"design-considerations",children:"Design Considerations"}),"\n",(0,s.jsx)(t.p,{children:"Up to the 2023.1 release (Antelope) the default Security Group rules are defined in the OpenStack code.\nWe should not require changing this behavior through code changes in deployments."}),"\n",(0,s.jsx)(t.p,{children:"Beginning with the 2023.2 release (Bobcat) the default Security Group rules can now be edited by administrators through an API.\nAll rules that should be present as default in Security Groups have to be configured by admins through this API."}),"\n",(0,s.jsx)(t.p,{children:"There are two ways to approach a standard for the default rules of Security Groups."}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"There could be a set of rules standardized that has to be configured by admins."})}),"\n",(0,s.jsx)(t.p,{children:"OpenStack's default rules for Security Groups already provide a good baseline for port security, because they allow all egress traffic and for the default Security Group only ingress traffic from the same group."}),"\n",(0,s.jsx)(t.p,{children:"Allowing more rules would not benefit the security level, while reducing or limiting the existing rules would barely improve it.\nNevertheless, a standard could hold up the current security level against possible future release with more open default rules.\nChanging the default rules will not change the rules of any existing Security Groups."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"With the already strict OpenStack default rules users are required in most use cases to create and manage their own Security Groups."})}),"\n",(0,s.jsxs)(t.p,{children:["This has the benefit that users need to explicitly think about the port security of their VMs and may be less likely to apply Security Groups which rules open up more ports than needed.\nThere is also a guide from the SCS project on how to set up a Security Group that also focuses on having a good port security",(0,s.jsx)(t.sup,{children:(0,s.jsx)(t.a,{href:"#user-content-fn-3",id:"user-content-fnref-3","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"3"})}),"."]}),"\n",(0,s.jsx)(t.p,{children:"With the default OpenStack behavior of having already strict rules, which in most cases require users to manage their own Security Groups, this standard should mandate a middle way:\nIt should allow adjusting the default rules, but only to a stricter version."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Allowing all outgoing traffic in the default rules in combination with blocking all incoming traffic would be strict enough from a security point of view.\nAnd it would make it necessary for users to check and change the rules of their Security Group to a meaningful set."}),"\n",(0,s.jsx)(t.h3,{id:"further-annotations",children:"Further Annotations"}),"\n",(0,s.jsx)(t.p,{children:"This standard should only be applied onto versions of OpenStack that implement the new endpoint for the default Security Group rules, which would only include 2023.2 or higher releases."}),"\n",(0,s.jsx)(t.p,{children:"It is possible to have different default Security Group rules for the default Security Group and custom Security Groups.\nAnd it is arguable to have a more strict standard for default rules for the default Security Group than for the custom Security Groups.\nBecause the latter ones are not automatically applied to a VM but are always edited by the users to apply to their requirements."}),"\n",(0,s.jsx)(t.p,{children:"The allowlisting concept of Security Group rules makes it hard to allow traffic with an exception to certain ports.\nIt would be possible to just define many rules to achieve what a blocklist would achieve.\nBut having many rules may confuse users, and they may not disable unnecessary default rules in their Security Groups."}),"\n",(0,s.jsx)(t.h2,{id:"standard",children:"Standard"}),"\n",(0,s.jsx)(t.p,{children:'The default Security Group rules for the default Security Groups SHOULD allow incoming traffic from the same Security Group.\nThe default Security Group rules for ALL Security Groups MUST NOT allow any other incoming traffic. Neither IPv4 nor IPv6.\nThis can be achieved through having ingress rules in the default Security Group rules that allow ingress traffic from the Remote Security Group "PARENT" but are only used in the default Security Group.'}),"\n",(0,s.jsx)(t.p,{children:"The default Security Group rules for ALL Security Groups SHOULD allow egress Traffic for both IPv4 and IPv6."}),"\n",(0,s.jsx)(t.h3,{id:"example",children:"Example"}),"\n",(0,s.jsx)(t.p,{children:"In the following table, there is only ingress traffic between the same default Security Groups allowed plus all egress traffic:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"$ openstack default security group rule list\n+--------------------------+-------------+-----------+-----------+------------+-----------+-----------------------+----------------------+--------------------------------+-------------------------------+\n| ID                       | IP Protocol | Ethertype | IP Range  | Port Range | Direction | Remote Security Group | Remote Address Group | Used in default Security Group | Used in custom Security Group |\n+--------------------------+-------------+-----------+-----------+------------+-----------+-----------------------+----------------------+--------------------------------+-------------------------------+\n| 47b929fd-9b39-4f22-abc5- | None        | IPv6      | ::/0      |            | egress    | None                  | None                 | True                           | True                          |\n| 7d4f64d10909             |             |           |           |            |           |                       |                      |                                |                               |\n| 92a79600-5358-4fef-a390- | None        | IPv4      | 0.0.0.0/0 |            | egress    | None                  | None                 | True                           | True                          |\n| 822665f46070             |             |           |           |            |           |                       |                      |                                |                               |\n| 93e35d0c-2482-4ec1-9fbd- | None        | IPv4      | 0.0.0.0/0 |            | ingress   | PARENT                | None                 | True                           | False                         |\n| fd8c9a21a04e             |             |           |           |            |           |                       |                      |                                |                               |\n| ed5cd662-add2-4e42-b0a7- | None        | IPv6      | ::/0      |            | ingress   | PARENT                | None                 | True                           | False                         |\n| 3b585d348820             |             |           |           |            |           |                       |                      |                                |                               |\n+--------------------------+-------------+-----------+-----------+------------+-----------+-----------------------+----------------------+--------------------------------+-------------------------------+\n"})}),"\n",(0,s.jsx)(t.h2,{id:"related-documents",children:"Related Documents"}),"\n",(0,s.jsxs)(t.p,{children:["The spec for introducing configurability for the default Security Groups Rules can be found ",(0,s.jsx)(t.a,{href:"https://specs.openstack.org/openstack/neutron-specs/specs/2023.2/configurable-default-sg-rules.html",children:"here"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["More about Security Groups as a resource in OpenStack can be found ",(0,s.jsx)(t.a,{href:"https://docs.openstack.org/nova/latest/user/security-groups.html",children:"here"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"conformance-tests",children:"Conformance Tests"}),"\n",(0,s.jsxs)(t.p,{children:["The conformance tests should check for the absence of any ingress traffic rules except traffic from the same Security Group in the ",(0,s.jsx)(t.code,{children:"openstack default security group rule list"}),".\nAs having egress rules is allowed by this standard, but not forced and can be set in various ways, the tests should check for presence of any egress rules."]}),"\n","\n",(0,s.jsxs)(t.section,{"data-footnotes":!0,className:"footnotes",children:[(0,s.jsx)(t.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{id:"user-content-fn-1",children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.a,{href:"https://bugs.launchpad.net/neutron/+bug/1983053",children:"Tracking of development for editable default SG rules"})," ",(0,s.jsx)(t.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{id:"user-content-fn-2",children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.a,{href:"https://docs.openstack.org/releasenotes/neutron/2023.2.html",children:"Release Notes of Neutron 2023.2"})," ",(0,s.jsx)(t.a,{href:"#user-content-fnref-2","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{id:"user-content-fn-3",children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.a,{href:"https://docs.scs.community/docs/iaas/guides/user-guide/security-groups/",children:"Guide for Security Groups"})," ",(0,s.jsx)(t.a,{href:"#user-content-fnref-3","data-footnote-backref":"","aria-label":"Back to reference 3",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,t,r)=>{r.d(t,{R:()=>o,x:()=>i});var n=r(96540);const s={},a=n.createContext(s);function o(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);