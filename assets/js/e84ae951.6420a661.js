"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[10329],{5913:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"scs-0116-v1-key-manager-standard","title":"SCS Key Manager Standard","description":"Introduction","source":"@site/standards/scs-0116-v1-key-manager-standard.md","sourceDirName":".","slug":"/scs-0116-v1-key-manager-standard","permalink":"/standards/scs-0116-v1-key-manager-standard","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"SCS Key Manager Standard","type":"Standard","status":"Stable","stabilized_at":"2024-11-13T00:00:00.000Z","track":"IaaS"},"sidebar":"standards","previous":{"title":"scs-0116: SCS Key Manager Standard","permalink":"/standards/iaas/scs-0116"},"next":{"title":"W1","permalink":"/standards/scs-0116-w1-key-manager-implementation-testing"}}');var s=t(74848),r=t(28453);const i={title:"SCS Key Manager Standard",type:"Standard",status:"Stable",stabilized_at:new Date("2024-11-13T00:00:00.000Z"),track:"IaaS"},o=void 0,d={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Terminology",id:"terminology",level:2},{value:"Motivation",id:"motivation",level:2},{value:"Design Considerations",id:"design-considerations",level:2},{value:"Options considered",id:"options-considered",level:3},{value:"Recommend or even mandate specific Key Manager plugins",id:"recommend-or-even-mandate-specific-key-manager-plugins",level:4},{value:"Recommendation regarding the handling of the Master KEK",id:"recommendation-regarding-the-handling-of-the-master-kek",level:4},{value:"Standardization of the Key Manager Policy",id:"standardization-of-the-key-manager-policy",level:4},{value:"Key Manager Standard",id:"key-manager-standard",level:2},{value:"Key Manager Policies",id:"key-manager-policies",level:3},{value:"Related Documents",id:"related-documents",level:2},{value:"Conformance Tests",id:"conformance-tests",level:2}];function l(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",section:"section",sup:"sup",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,s.jsx)(n.p,{children:"To encrypt user data like volumes or in the future also Images and ephemeral storage for VMs, the key has to be present in the infrastructure.\nA Key Manager service within the infrastructure can be utilized to store keys.\nConsequently providing keys for every encryption or decryption is possible without including the user.\nAlso authorization policies can be applied on every request to the Key Manager service.\nOpenStack offers a Key Manager implementation that is named Barbican, which provides these features.\nThis standard aims to provide a base level of security for Cloud Service Providers that integrate a Key Manager into their deployments."}),"\n",(0,s.jsx)(n.h2,{id:"terminology",children:"Terminology"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Term"}),(0,s.jsx)(n.th,{children:"Meaning"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"API"}),(0,s.jsx)(n.td,{children:"Application Programming Interface, often referring to the REST API interfaces provided by OpenStack and related services"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Barbican"}),(0,s.jsx)(n.td,{children:"The Key Manager implementation in OpenStack"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"CSP"}),(0,s.jsx)(n.td,{children:"Cloud Service Provider, provider managing the OpenStack infrastructure"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"IaaS"}),(0,s.jsx)(n.td,{children:"Infrastructure-as-a-Service"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"HSM"}),(0,s.jsx)(n.td,{children:"Hardware Security Module"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"KEK"}),(0,s.jsx)(n.td,{children:"Key Encryption Key"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"RBAC"}),(0,s.jsx)(n.td,{children:"Role Based Access Control"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"motivation",children:"Motivation"}),"\n",(0,s.jsx)(n.p,{children:"User data encryption requires an encryption key to be known during encryption and decryption processes.\nKey Managers like Barbican provide this functionality on the IaaS-Level.\nNot every IaaS deployment currently offers user data encryption as part of their standard offering.\nThis standard should encourage CSPs to integrate a Key Manager and thus increase the amount of Clouds with offerings of data encryption.\nIt is also important to take a closer look into the Key Manager and analyze how such a service can be configured securely."}),"\n",(0,s.jsx)(n.p,{children:"A Key Manager service manages keys in a secure manner, but this can be achieved differently and is not primarily in scope of this standard.\nThe OpenStack Key Manager Barbican stores keys encrypted with a project specific KEK in the database.\nThe KEKs are also stored encrypted in the same database.\nThe Master-KEK, used to encrypt the project specific KEKs is not stored in the database and is stored differently depending on the backend storage plugin used.\nThis standard also abstracts the used plugins and wants to ensure that the Master-KEK is protected, too."}),"\n",(0,s.jsx)(n.h2,{id:"design-considerations",children:"Design Considerations"}),"\n",(0,s.jsx)(n.p,{children:"While discussing what this standard should aim for it was discovered that some CSPs don't use Barbican or another Key Manager at all and do not provide the feature to encrypt user data to their customers.\nThis should change, but the exact change comes with financial burden, when choosing a plugin in Barbican to store the Master-KEK or choosing to integrate another Key Manager service instead.\nTo minimize the burden and enable more CSPs to step up and provide encryption, this standard will only make recommendations about plugins from Barbican."}),"\n",(0,s.jsx)(n.h3,{id:"options-considered",children:"Options considered"}),"\n",(0,s.jsx)(n.h4,{id:"recommend-or-even-mandate-specific-key-manager-plugins",children:"Recommend or even mandate specific Key Manager plugins"}),"\n",(0,s.jsx)(n.p,{children:"It was considered to only recommend a certain set of plugins or backends for the Key Manager, but this may be very prone to change if e.g. Barbican adds a new plugin.\nAs the SCS only wants to mandate the API that can be abstracted through the Castellan library in OpenStack, integrating any other Key Manager implementation is not uncommon, so this standard needs to consider other possible Key Managers as well.\nDue to these reasons this option was disregarded."}),"\n",(0,s.jsx)(n.h4,{id:"recommendation-regarding-the-handling-of-the-master-kek",children:"Recommendation regarding the handling of the Master KEK"}),"\n",(0,s.jsx)(n.p,{children:"Looking into the available Barbican plugins and possible attack vectors one design decision in the plugins is very important: where and how to store the Master-KEK.\nBecause the Plugins might use different technologies there are many locations for the Master KEK possible.\nMost of the Plugins increase the security level by not storing the Master-KEK in plain text on the physical machine Barbican is running on.\nThis mechanism as a whole, is something that CSPs should aim to do."}),"\n",(0,s.jsx)(n.h4,{id:"standardization-of-the-key-manager-policy",children:"Standardization of the Key Manager Policy"}),"\n",(0,s.jsxs)(n.p,{children:["Because this standards recommends or even eventually mandates the presence of a Key Manager, the situation about the policy of the Key Manager needs to be discussed.\nThe policy of an IaaS service should use the same roles as the other IaaS services.\nUnfortunately this does not apply to the Key Manager implementation Barbican.\nIt has the roles ",(0,s.jsx)(n.code,{children:"reader"}),", ",(0,s.jsx)(n.code,{children:"audit"})," and ",(0,s.jsx)(n.code,{children:"creator"}),", which are not present in the Keystone role concept.\nThe roles a customer usually gets through the Identity API is ",(0,s.jsx)(n.code,{children:"member"}),".\nLeaving it this way will prevent users from creating and using secrets even when a Key Manager is integrated."]}),"\n",(0,s.jsxs)(n.p,{children:["To unify the roles among all IaaS services, there is currently work done in the OpenStack Community.\nThis initiative is called secure RBAC",(0,s.jsx)(n.sup,{children:(0,s.jsx)(n.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),".\nAlso the SCS is discussing a standard concerning the roles",(0,s.jsx)(n.sup,{children:(0,s.jsx)(n.a,{href:"#user-content-fn-2",id:"user-content-fnref-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),".\nWhen this is done, there is no further work needed.\nBut as of the 2024.1 release, this is still under development."]}),"\n",(0,s.jsxs)(n.p,{children:["In conclusion this standard should mandate everyone who uses a Key Manager that does not include the secure RBAC, to adjust the policies to have a mapping between the internal ",(0,s.jsx)(n.code,{children:"creator"})," and the identity-based ",(0,s.jsx)(n.code,{children:"member"})," role.\nThis will result in a ",(0,s.jsx)(n.code,{children:"member"})," being allowed to do everything a ",(0,s.jsx)(n.code,{children:"creator"})," can do."]}),"\n",(0,s.jsx)(n.h2,{id:"key-manager-standard",children:"Key Manager Standard"}),"\n",(0,s.jsx)(n.p,{children:"To increase security and allow user data encryption, CSPs SHOULD implement the Key Manager API (e.g. implemented by Barbican).\nThe Keys managed by this Key Manager MUST be stored encrypted and the Master-KEK of the Key Manager MUST be stored in another place than the Keys."}),"\n",(0,s.jsx)(n.p,{children:"If possible CSPs SHOULD NOT store the Master-KEK in plain-text on the physical host the Key Manager is running on."}),"\n",(0,s.jsx)(n.h3,{id:"key-manager-policies",children:"Key Manager Policies"}),"\n",(0,s.jsxs)(n.p,{children:["If a Key Manager without secure RBAC enabled is used, the policies MUST be adjusted to let the ",(0,s.jsx)(n.code,{children:"member"})," role of the Identity service be equivalent to the Key Manager internal ",(0,s.jsx)(n.code,{children:"creator"})," role."]}),"\n",(0,s.jsx)(n.h2,{id:"related-documents",children:"Related Documents"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://docs.openstack.org/de/security-guide/secrets-management/barbican.html",children:"Barbican Plugins"})}),"\n",(0,s.jsx)(n.h2,{id:"conformance-tests",children:"Conformance Tests"}),"\n",(0,s.jsx)(n.p,{children:"Conformance must be tested in two steps."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"The check whether a Key Manager is present can be done in a similar way as in the mandatory OpenStack service APIs standard and the test should be merged into the mandatory service test as soon as a Key Manager is required in scs-conformant infrastructures."}),"\n",(0,s.jsx)(n.li,{children:"The check, that there is no Master-KEK present on the Key Manager Node, has to be done by the CSP themself."}),"\n"]}),"\n","\n",(0,s.jsxs)(n.section,{"data-footnotes":!0,className:"footnotes",children:[(0,s.jsx)(n.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{id:"user-content-fn-1",children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://etherpad.opendev.org/p/rbac-goal-tracking",children:"Secure RBAC work in OpenStack"})," ",(0,s.jsx)(n.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{id:"user-content-fn-2",children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/SovereignCloudStack/issues/issues/396",children:"Issue for a role standard in SCS"})," ",(0,s.jsx)(n.a,{href:"#user-content-fnref-2","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var a=t(96540);const s={},r=a.createContext(s);function i(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);