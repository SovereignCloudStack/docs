"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2925],{36667:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"operating-scs/components/status-page-deployment/docs/configuration","title":"Configure status page","description":"A minimal configuration of the status page deployment.","source":"@site/docs/04-operating-scs/components/status-page-deployment/docs/configuration.md","sourceDirName":"04-operating-scs/components/status-page-deployment/docs","slug":"/operating-scs/components/status-page-deployment/docs/configuration","permalink":"/docs/operating-scs/components/status-page-deployment/docs/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/SovereignCloudStack/docs/tree/main/docs/04-operating-scs/components/status-page-deployment/docs/configuration.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Configuration","permalink":"/docs/category/configuration"},"next":{"title":"kind - Local development environment","permalink":"/docs/operating-scs/components/status-page-deployment/docs/kind"}}');var o=t(74848),i=t(28453);const r={},d="Configure status page",a={},c=[{value:"API server",id:"api-server",level:2},{value:"Database",id:"database",level:2},{value:"Dex",id:"dex",level:2},{value:"Oathkeeper",id:"oathkeeper",level:2},{value:"Web frontend",id:"web-frontend",level:2},{value:"Ingress",id:"ingress",level:2},{value:"Issuer",id:"issuer",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"configure-status-page",children:"Configure status page"})}),"\n",(0,o.jsx)(n.p,{children:"A minimal configuration of the status page deployment."}),"\n",(0,o.jsx)(n.h2,{id:"api-server",children:"API server"}),"\n",(0,o.jsxs)(n.p,{children:["Configure the allowed origins via ",(0,o.jsx)(n.code,{children:"api/api.env"})," to include the domain from the web frontend. CORS origins need to include the protocol, too. Example: ",(0,o.jsx)(n.code,{children:"https://frontend.<your-domain>"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"database",children:"Database"}),"\n",(0,o.jsxs)(n.p,{children:["Set a password for the database at ",(0,o.jsx)(n.code,{children:"database/db-secrets.env"})," and configure the connection string in ",(0,o.jsx)(n.code,{children:"api/api-secrets.env"})]}),"\n",(0,o.jsx)(n.h2,{id:"dex",children:"Dex"}),"\n",(0,o.jsxs)(n.p,{children:["Dex needs a GitHub Applications Client Secret in ",(0,o.jsx)(n.code,{children:"dex/dex-secrets.env"}),", please refer to ",(0,o.jsx)(n.code,{children:"dex/dex-secrets-example.env"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["Set the ",(0,o.jsx)(n.code,{children:"issuer"})," and ",(0,o.jsx)(n.code,{children:"redirectURI"})," at ",(0,o.jsx)(n.code,{children:"dex/config.yaml"})," to your domain. Keep in mind, that dex needs it's own domain or subdomain."]}),"\n",(0,o.jsxs)(n.p,{children:["Other Dex related configuration is located in ",(0,o.jsx)(n.code,{children:"dex/dex.env"}),", ",(0,o.jsx)(n.code,{children:"web/web-secrets.env"})," and ",(0,o.jsx)(n.code,{children:"web/web.env"})," to fill the configuration template ",(0,o.jsx)(n.code,{children:"dex/config.yaml"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"oathkeeper",children:"Oathkeeper"}),"\n",(0,o.jsxs)(n.p,{children:["Set your domain in ",(0,o.jsx)(n.code,{children:"oathkeeper/config.yaml"})," at ",(0,o.jsx)(n.code,{children:"authenticators.jwt.config.jwks_urls"})," and ",(0,o.jsx)(n.code,{children:"authenticators.jwt.config.trusted_issuers"})," to point towards Dex."]}),"\n",(0,o.jsx)(n.h2,{id:"web-frontend",children:"Web frontend"}),"\n",(0,o.jsxs)(n.p,{children:["In ",(0,o.jsx)(n.code,{children:"web/web.env"})," configure the OIDC authentication callback and the API url. The API URL must be pointing to the external domain, not the K8s service name."]}),"\n",(0,o.jsx)(n.h2,{id:"ingress",children:"Ingress"}),"\n",(0,o.jsxs)(n.p,{children:["In ",(0,o.jsx)(n.code,{children:"ingress.yaml"})," set your domains for Dex, Oathkeeper and the web frontend respectively. Oathkeeper acts as the auth proxy for the API server. Exposing the API server directly, opens up the possibility of unsupervised write actions."]}),"\n",(0,o.jsx)(n.h2,{id:"issuer",children:"Issuer"}),"\n",(0,o.jsxs)(n.p,{children:["Set the e-mail address in ",(0,o.jsx)(n.code,{children:"issuer.yaml"})," to your desired e-mail address."]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>d});var s=t(96540);const o={},i=s.createContext(o);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);