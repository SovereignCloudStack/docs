"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[86512],{26589:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>p,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"operating-scs/components/status-page-deployment/docs/usage","title":"Usage","description":"You can use and test the API via any API client (Bruno, built in Swagger UI, etc.), CLI tool (like curl) or the web frontend.","source":"@site/docs/04-operating-scs/components/status-page-deployment/docs/usage.md","sourceDirName":"04-operating-scs/components/status-page-deployment/docs","slug":"/operating-scs/components/status-page-deployment/docs/usage","permalink":"/docs/operating-scs/components/status-page-deployment/docs/usage","draft":false,"unlisted":false,"editUrl":"https://github.com/SovereignCloudStack/docs/tree/main/docs/04-operating-scs/components/status-page-deployment/docs/usage.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"SCS Public","permalink":"/docs/operating-scs/components/status-page-deployment/docs/scs-public"},"next":{"title":"Monitoring","permalink":"/docs/operating-scs/components/status-page-deployment/docs/monitoring"}}');var o=t(74848),r=t(28453);const c={},i="Usage",a={},d=[{value:"Receive auth code",id:"receive-auth-code",level:2},{value:"Exchange token",id:"exchange-token",level:3},{value:"Use API",id:"use-api",level:3}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"usage",children:"Usage"})}),"\n",(0,o.jsxs)(n.p,{children:["You can use and test the API via any API client (",(0,o.jsx)(n.a,{href:"https://www.usebruno.com/",children:"Bruno"}),", built in Swagger UI, etc.), CLI tool (like ",(0,o.jsx)(n.code,{children:"curl"}),") or the web frontend."]}),"\n",(0,o.jsxs)(n.p,{children:["All examples provided use ",(0,o.jsx)(n.code,{children:"curl"}),", the most manual methods and the public SCS release."]}),"\n",(0,o.jsx)(n.h2,{id:"receive-auth-code",children:"Receive auth code"}),"\n",(0,o.jsxs)(n.p,{children:["Visit the ",(0,o.jsx)(n.a,{href:"https://status-idp.k8s.scs.community/.well-known/openid-configuration",children:"openid-configuration"})," of the running Dex and build an auth URL from the provided information and your desired parameters."]}),"\n",(0,o.jsx)(n.p,{children:"For example:"}),"\n",(0,o.jsx)(n.p,{children:"https:///login"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-txt",children:"https://status-idp.k8s.scs.community/auth?client_id=status-page-web&redirect_uri=https%3A%2F%2Fstatus.k8s.scs.community%2Flogin&response_type=code&scope=openid+profile+email+offline_access\n"})}),"\n",(0,o.jsx)(n.p,{children:"And visit the generated URL to start the Authorization Code Flow."}),"\n",(0,o.jsxs)(n.p,{children:["After authentication you get redirect to ",(0,o.jsx)(n.code,{children:"https://status.k8s.scs.community/login?code=<your-code>&state="})]}),"\n",(0,o.jsx)(n.h3,{id:"exchange-token",children:"Exchange token"}),"\n",(0,o.jsx)(n.p,{children:"Copy your code and send it to the token URL."}),"\n",(0,o.jsx)(n.p,{children:"For example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'$ curl -sL \\\n-X POST \\\n-H \'Content-Type: application/x-www-form-urlencoded\' \\\n-d \'client_id=status-page-web\' \\\n-d \'client_secret=<your-secret>\' \\\n-d \'code=<your-code>\' \\\n-d \'redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Flogin\' \\\n-d \'grant_type=authorization_code\' \\\nhttps://status-idp.k8s.scs.community/token\n\n{\n  "access_token": "<your-access-token>",\n  "token_type": "bearer",\n  "expires_in": 86399,\n  "refresh_token": "<your-refresh-token>",\n  "id_token": "<your-id-token>"\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"NOTE"}),": Be ",(0,o.jsx)(n.strong,{children:"extremely careful"})," with your ",(0,o.jsx)(n.strong,{children:"code"})," and ",(0,o.jsx)(n.strong,{children:"client secret"})," as they represent ",(0,o.jsx)(n.strong,{children:"credentials"}),"!"]}),"\n",(0,o.jsx)(n.h3,{id:"use-api",children:"Use API"}),"\n",(0,o.jsx)(n.p,{children:"Copy your id token and use it as bearer token in writing requests."}),"\n",(0,o.jsx)(n.p,{children:"For example creating a new component:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"curl -sL \\\n-X POST \\\n-H 'Authorization: Bearer <your-id-token>' \\\n-H 'Content-Type: application/json' \\\n-d '{\"displayName\":\"Test-Component\"}'\\\nhttps://status-api.k8s.scs.community/components\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"NOTE"}),": Be ",(0,o.jsx)(n.strong,{children:"extremely careful"})," with your ",(0,o.jsx)(n.strong,{children:"id token"})," and ",(0,o.jsx)(n.strong,{children:"access token"})," as they represent ",(0,o.jsx)(n.strong,{children:"credentials"}),"!"]}),"\n",(0,o.jsxs)(n.p,{children:["More usage examples can be found at ",(0,o.jsx)(n.a,{href:"https://github.com/SovereignCloudStack/status-page-api/blob/main/docs/example-requests.md",children:"SovereignCloudStack/status-page-api/docs/example-requests.md"})]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>i});var s=t(96540);const o={},r=s.createContext(o);function c(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);