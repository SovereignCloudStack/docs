"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[25930],{30941:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>l,frontMatter:()=>o,metadata:()=>t,toc:()=>i});const t=JSON.parse('{"id":"operating-scs/components/status-page-deployment/docs/monitoring","title":"Monitoring","description":"All backend components of the status page can be instrumented to supply metrics. These metrics can be collected and visualized by monitoring technologies like Prometheus and Grafana.","source":"@site/docs/04-operating-scs/components/status-page-deployment/docs/monitoring.md","sourceDirName":"04-operating-scs/components/status-page-deployment/docs","slug":"/operating-scs/components/status-page-deployment/docs/monitoring","permalink":"/docs/operating-scs/components/status-page-deployment/docs/monitoring","draft":false,"unlisted":false,"editUrl":"https://github.com/SovereignCloudStack/docs/tree/main/docs/04-operating-scs/components/status-page-deployment/docs/monitoring.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Usage","permalink":"/docs/operating-scs/components/status-page-deployment/docs/usage"},"next":{"title":"Contribute","permalink":"/docs/operating-scs/components/status-page-deployment/docs/contribute"}}');var d=n(74848),r=n(28453);const o={},a="Monitoring",c={},i=[{value:"Endpoints",id:"endpoints",level:2},{value:"Dashboards",id:"dashboards",level:2},{value:"KinD",id:"kind",level:2}];function h(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.header,{children:(0,d.jsx)(s.h1,{id:"monitoring",children:"Monitoring"})}),"\n",(0,d.jsxs)(s.p,{children:["All backend components of the status page can be instrumented to supply metrics. These metrics can be collected and visualized by monitoring technologies like ",(0,d.jsx)(s.a,{href:"https://prometheus.io/",children:"Prometheus"})," and ",(0,d.jsx)(s.a,{href:"https://grafana.com/",children:"Grafana"}),"."]}),"\n",(0,d.jsx)(s.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,d.jsx)(s.p,{children:"The services expose their metrics endpoints on different ports."}),"\n",(0,d.jsxs)(s.table,{children:[(0,d.jsx)(s.thead,{children:(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.th,{children:"Service"}),(0,d.jsx)(s.th,{children:"Port (Name)"}),(0,d.jsx)(s.th,{children:"Endpoint"})]})}),(0,d.jsxs)(s.tbody,{children:[(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"api-db"})}),(0,d.jsxs)(s.td,{children:[(0,d.jsx)(s.code,{children:"9187"})," (",(0,d.jsx)(s.code,{children:"metrics"}),")"]}),(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"/metrics"})})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"api"})}),(0,d.jsxs)(s.td,{children:[(0,d.jsx)(s.code,{children:"9000"})," (",(0,d.jsx)(s.code,{children:"metrics"}),")"]}),(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"/metrics"})})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"dex"})}),(0,d.jsxs)(s.td,{children:[(0,d.jsx)(s.code,{children:"5558"})," (",(0,d.jsx)(s.code,{children:"telemetry"}),")"]}),(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"/metrics"})})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"oathkeeper"})}),(0,d.jsxs)(s.td,{children:[(0,d.jsx)(s.code,{children:"9000"})," (",(0,d.jsx)(s.code,{children:"metrics"}),")"]}),(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"/metrics"})})]})]})]}),"\n",(0,d.jsx)(s.h2,{id:"dashboards",children:"Dashboards"}),"\n",(0,d.jsx)(s.p,{children:"To visualize the supplied metrics, some dashboards are needed."}),"\n",(0,d.jsxs)(s.p,{children:["For the used database and exporter the ",(0,d.jsx)(s.a,{href:"https://grafana.com/grafana/dashboards/9628-postgresql-database/",children:"PostgreSQL Database"})," dashboard is recommended."]}),"\n",(0,d.jsxs)(s.p,{children:["Go runtime metrics can be visualized by the ",(0,d.jsx)(s.a,{href:"https://grafana.com/grafana/dashboards/10826-go-metrics/",children:"Go Metrics"})," dashboard."]}),"\n",(0,d.jsxs)(s.p,{children:["Hand crafted dashboard for Dex, Oathkeeper and the status-page-api are located at ",(0,d.jsx)(s.code,{children:"kubernetes/feature/monitoring/grafana/dashboards"})," and have according prefixes."]}),"\n",(0,d.jsx)(s.h2,{id:"kind",children:"KinD"}),"\n",(0,d.jsx)(s.p,{children:"The KinD deployment deploys Grafana and Prometheus pods and sets up the data source and dashboards, to work with the rest of the deployment out of the box."}),"\n",(0,d.jsx)(s.p,{children:"The Grafana frontend can be accessed by port forwarding the reverse proxy:"}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{className:"language-bash",children:"kubectl --context kind-status-page -n status-page port-forward pods/status-page-reverse-proxy-78d588d58b-7rdn6 8080:8080\n"})}),"\n",(0,d.jsxs)(s.p,{children:["Afterwards Grafana can be accessed by navigating to ",(0,d.jsx)(s.code,{children:"monitoring.localhost:8080"}),". Use the username ",(0,d.jsx)(s.code,{children:"admin"})," and password ",(0,d.jsx)(s.code,{children:"s3cr3t"}),"."]})]})}function l(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,d.jsx)(s,{...e,children:(0,d.jsx)(h,{...e})}):h(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>a});var t=n(96540);const d={},r=t.createContext(d);function o(e){const s=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:o(e.components),t.createElement(r.Provider,{value:s},e.children)}}}]);