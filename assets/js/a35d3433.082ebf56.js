"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[80123],{90869:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"scs-0212-v1-requirements-for-container-registries","title":"Requirements for container registries","description":"Introduction","source":"@site/standards/scs-0212-v1-requirements-for-container-registries.md","sourceDirName":".","slug":"/scs-0212-v1-requirements-for-container-registries","permalink":"/standards/scs-0212-v1-requirements-for-container-registries","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Requirements for container registries","type":"Standard","status":"Draft","track":"KaaS"},"sidebar":"standards","previous":{"title":"scs-0212: Requirements for container registries","permalink":"/standards/kaas/scs-0212"},"next":{"title":"scs-0213: Kubernetes Nodes Anti Affinity","permalink":"/standards/kaas/scs-0213"}}');var t=i(74848),r=i(28453);const a={title:"Requirements for container registries",type:"Standard",status:"Draft",track:"KaaS"},o=void 0,l={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Terminology",id:"terminology",level:2},{value:"Motivation",id:"motivation",level:2},{value:"Design considerations",id:"design-considerations",level:2},{value:"OSS health check",id:"oss-health-check",level:3},{value:"Required and desirable features check",id:"required-and-desirable-features-check",level:3},{value:"Required features",id:"required-features",level:4},{value:"Desirable features",id:"desirable-features",level:4},{value:"Standard",id:"standard",level:2},{value:"Related Documents",id:"related-documents",level:2}];function d(e){const n={a:"a",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsx)(n.p,{children:"A container registry is an infrastructure service to enable storing and accessing container\nimages. Images can be pushed to the registry by e.g. Continuous integration pipelines and\nbe pulled from by runtime environments like Kubernetes clusters."}),"\n",(0,t.jsx)(n.p,{children:"Container registries come in various forms, e.g. publicly accessible ones like Docker Hub or\nself-hosted and cloud-hosted services. The latter examples may apply various access control\nmechanisms to restrict access. Both solutions offer a wide range of features that may or may not\nattract potential users and CSPs."}),"\n",(0,t.jsx)(n.h2,{id:"terminology",children:"Terminology"}),"\n",(0,t.jsx)(n.p,{children:"Cloud Service Provider (abbr. CSP)\nEntity that provides scalable computing resources"}),"\n",(0,t.jsx)(n.p,{children:"Identity Provider (abbr. IdP)\nSystem that creates, maintains, and manages identity information"}),"\n",(0,t.jsx)(n.h2,{id:"motivation",children:"Motivation"}),"\n",(0,t.jsx)(n.p,{children:'This standard is motivated by different use cases identified through the topics in the SCS project.\nOne use case would be the offering of private registries for customers by CSPs, which means that a CSP could\noffer private container registries either as a service or as a provided "recipe" to deploy a private registry\nutilizing the CSPs infrastructure.\nAnother use case would be the selection of a registry for the SCS reference implementation.'}),"\n",(0,t.jsx)(n.p,{children:"The idea and purpose of this document is to specify what requirements a specific technical container\nregistry implementation (i.e. software solution) needs to fulfill for an SCS-compliant registry."}),"\n",(0,t.jsx)(n.h2,{id:"design-considerations",children:"Design considerations"}),"\n",(0,t.jsx)(n.p,{children:"There are numerous features that should be evaluated for a container registry solution.\nIt is important to assess the registries based on the requirements of the OSS health checks and\ndesired features defined by the SCS. The following two subsections show these requirements."}),"\n",(0,t.jsx)(n.h3,{id:"oss-health-check",children:"OSS health check"}),"\n",(0,t.jsxs)(n.p,{children:["It is important to evaluate the health of a project before even evaluating the project for its feature set.\nA project should therefore fulfill all OSS health checks be defined by the\n",(0,t.jsx)(n.a,{href:"https://github.com/SovereignCloudStack/standards/blob/main/Drafts/OSS-Health.md",children:"OSS-Health"})," document.\nThis document evaluates the health of the open-source projects that were selected from\nthe currently available solutions. The container registry software must fulfill all OSS\nhealth checks defined below:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Four Opens (code is fully open source, community is open and diverse, development process is open, design process is open)"}),"\n",(0,t.jsx)(n.li,{children:"Maturity"}),"\n",(0,t.jsx)(n.li,{children:"Security"}),"\n",(0,t.jsx)(n.li,{children:"Activity"}),"\n",(0,t.jsx)(n.li,{children:"Lock-in risk assessment"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"required-and-desirable-features-check",children:"Required and desirable features check"}),"\n",(0,t.jsx)(n.p,{children:"A container registry provides a specific feature set, which can be mapped out against the requirements\ndescribed in this section. The registry should generally be robust (e.g. operate under heavy load) and\nsecure in order to be acceptable for the SCS standard. Therefore, a required and optional feature set\nwere defined, to which a container registry must abide and be evaluated against."}),"\n",(0,t.jsx)(n.h4,{id:"required-features",children:"Required features"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Audit Logs","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"ability to record use in auditable logs so that activity can be traced to a single user"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Authentication of system identities","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"support for authenticating system identities like Kubernetes clusters"}),"\n",(0,t.jsx)(n.li,{children:"possibly support for dynamic identity tokens from some IdP"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Authentication of users","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"support for multiple authentication systems (IdM integration)"}),"\n",(0,t.jsx)(n.li,{children:"user and user account management"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Authorization","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"role-based access control to ensure strict access controls"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Automation","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"integration with CI/CD tools e.g. via webhooks"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Vulnerability scanning","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"reveal security vulnerabilities in container images"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Content Trust and Validation","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"verify image authenticity before running"}),"\n",(0,t.jsx)(n.li,{children:"image signing"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Multi-tenancy","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"container registry is able to serve multiple tenants (projects, teams, namespaces)"}),"\n",(0,t.jsxs)(n.li,{children:["implementation on the storage level, see e.g. ",(0,t.jsx)(n.a,{href:"https://github.com/sapcc/keppel#overview",children:"Keppel"}),", which uses\nmulti-tenant-aware storage drivers"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Backup and restore","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"possible strategies for disaster recovery and data migration scenarios"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Monitoring","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"observability is a key feature for operating a service in production so the container registry should expose key metrics"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["HA mode","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"enable the possibility of system uptime, even if a failure of some sort could occur"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Registry replication","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"replication allows users to replicate container images between registries of the same instances and between registries of different instances as well"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Proxy cache (pull-through cache)","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Proxy cache enables the use of a container registry to proxy and cache images from a target public or private registry"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Quota management","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"ability to control resource use of components or the whole registry"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Garbage collection","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"removing blobs from the filesystem when they are no longer referenced by a manifest"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Retention policy","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"reduce the number of image tags, many of which might not be required after a given time or once a subsequent image tag has superseded them"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"desirable-features",children:"Desirable features"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Additionally supported artifacts","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Additional artifacts that the registry is able to store in addition to OCI artifacts, e.g. Java, Node.js, or Python packages"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Integration possibilities","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Ability to cooperate with another software solution in order to improve own feature set (e.g. integration of P2P solution for improving container image distribution (download speed and stability, high scalability, ...))"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Deployment capabilities","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'ways to deploy a container registry (only "official" ways are mentioned)'}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:['Administration capabilities "as a code"',"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'ability to manage container registry via "as a code" solutions, e.g. Ansible role'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"standard",children:"Standard"}),"\n",(0,t.jsx)(n.p,{children:"It is very unlikely, that every Container registry can fulfill every requirement defined by this document, and probably\nnot all deployments require every feature listed here. The required feature set should therefore be carefully considered\nby the provider of the registry. We nevertheless RECOMMEND using most of the feature set provided in this document."}),"\n",(0,t.jsx)(n.p,{children:"If the features mentioned above are all considered, a possible registry solution SHOULD fulfill the majority of\nthe required features. But this is again dependent on the specific use case and the surrounding architecture."}),"\n",(0,t.jsx)(n.h2,{id:"related-documents",children:"Related Documents"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://github.com/SovereignCloudStack/standards/blob/main/Drafts/OSS-Health.md",children:"OSS-Health"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>o});var s=i(96540);const t={},r=s.createContext(t);function a(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);