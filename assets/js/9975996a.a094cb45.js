"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[78532],{51019:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>i,contentTitle:()=>c,default:()=>d,frontMatter:()=>a,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"container/components/cluster-stacks/components/cluster-stack-operator/develop/releasing","title":"releasing","description":"Release Process","source":"@site/docs/03-container/components/cluster-stacks/components/cluster-stack-operator/develop/releasing.md","sourceDirName":"03-container/components/cluster-stacks/components/cluster-stack-operator/develop","slug":"/container/components/cluster-stacks/components/cluster-stack-operator/develop/releasing","permalink":"/docs/container/components/cluster-stacks/components/cluster-stack-operator/develop/releasing","draft":false,"unlisted":false,"editUrl":"https://github.com/SovereignCloudStack/docs/tree/main/docs/03-container/components/cluster-stacks/components/cluster-stack-operator/develop/releasing.md","tags":[],"version":"current","frontMatter":{}}');var o=s(74848),r=s(28453);const a={},c=void 0,i={},l=[{value:"Release Process",id:"release-process",level:2},{value:"Step 1: Create and Push a tag",id:"step-1-create-and-push-a-tag",level:3},{value:"Step 2: Release in GitHub",id:"step-2-release-in-github",level:3}];function h(e){const t={a:"a",blockquote:"blockquote",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h2,{id:"release-process",children:"Release Process"}),"\n",(0,o.jsxs)(t.p,{children:["This document describes the release process of cluster-stack-operator.\nThe release process is done using GitHub actions. The release workflow triggers when a tag is pushed starting with ",(0,o.jsx)(t.code,{children:"v*"})]}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsxs)(t.p,{children:["[!NOTE]\nBefore the release, please make sure that you've already updated metadata.yaml at the root of the repo. So, if you're using v1.2.0 then you'll also need to update the ",(0,o.jsx)(t.code,{children:"releaseSeries"})," block in metadata.yaml. The tag used for releasing should be compatible with what we have defined in metadata.yaml"]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"Creating a new release of cluster-stack-operator covers the following steps:"}),"\n",(0,o.jsx)(t.h3,{id:"step-1-create-and-push-a-tag",children:"Step 1: Create and Push a tag"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"Create an annotated tag"}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"git switch main\ngit pull --rebase \n# check older releases for semver compatibility\nexport RELEASE_TAG=<the tag of the release to be cut> (e.g. v0.0.1)\ngit tag -a ${RELEASE_TAG} -m ${RELEASE_TAG}\n"})}),"\n",(0,o.jsxs)(t.ol,{start:"2",children:["\n",(0,o.jsx)(t.li,{children:"Push the tag to GitHub repository"}),"\n"]}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsxs)(t.p,{children:["[!NOTE]",(0,o.jsx)(t.br,{}),"\n",(0,o.jsx)(t.code,{children:"origin"})," should be the name of the remote pointing to ",(0,o.jsx)(t.a,{href:"https://github.com/SovereignCloudStack/cluster-stack-operator",children:"https://github.com/SovereignCloudStack/cluster-stack-operator"})," and you should have permission to push tags to the repository."]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"Once you confirm that origin is correct then push the tag by invoking the following command:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"git push origin ${RELEASE_TAG}\n"})}),"\n",(0,o.jsx)(t.p,{children:"This will automatically trigger a Github workflow to create a draft release in GitHub."}),"\n",(0,o.jsx)(t.h3,{id:"step-2-release-in-github",children:"Step 2: Release in GitHub"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"Review the draft release manually and check if the image tags are correct in the released manifest."}),"\n",(0,o.jsx)(t.li,{children:"After this, if you're going to cut a pre-release version then please append this line to the top of the release notes."}),"\n"]}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsxs)(t.p,{children:["[!WARNING]\n","\ud83d\udea8"," This is a RELEASE CANDIDATE. If you find any bugs, please file an ",(0,o.jsx)(t.a,{href:"https://github.com/SovereignCloudStack/cluster-stack-operator/issues/new",children:"issue"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(t.ol,{start:"3",children:["\n",(0,o.jsxs)(t.li,{children:["Before publishing the images make sure that images are already there in GitHub container registry. This can be checked in the ",(0,o.jsx)(t.a,{href:"https://github.com/SovereignCloudStack/cluster-stack-operator/pkgs/container/cso",children:"packages section"})," of the organisation."]}),"\n",(0,o.jsx)(t.li,{children:"Publish the release."}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>c});var n=s(96540);const o={},r=n.createContext(o);function a(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);