"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[44716],{48472:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"iaas/deployment-examples/artcodix/index","title":"artcodix","description":"Preface","source":"@site/docs/02-iaas/deployment-examples/artcodix/index.mdx","sourceDirName":"02-iaas/deployment-examples/artcodix","slug":"/iaas/deployment-examples/artcodix/","permalink":"/docs/iaas/deployment-examples/artcodix/","draft":false,"unlisted":false,"editUrl":"https://github.com/SovereignCloudStack/docs/tree/main/docs/02-iaas/deployment-examples/artcodix/index.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Preface","permalink":"/docs/iaas/deployment-examples/5G Campusnetz/preface"},"next":{"title":"Container Layer Introduction","permalink":"/docs/container/"}}');var r=o(74848),s=o(28453);const i={},a="artcodix",l={},d=[{value:"Preface",id:"preface",level:2},{value:"Node type definitions",id:"node-type-definitions",level:2},{value:"Control Node",id:"control-node",level:3},{value:"Compute Node (HCI/no HCI)",id:"compute-node-hcino-hci",level:3},{value:"Not Hyperconverged Infrastructure (no HCI)",id:"not-hyperconverged-infrastructure-no-hci",level:4},{value:"Hyperconverged Infrastructure (HCI)",id:"hyperconverged-infrastructure-hci",level:4},{value:"No HCI / vs HCI",id:"no-hci--vs-hci",level:4},{value:"Storage Node",id:"storage-node",level:3},{value:"Network Node",id:"network-node",level:3},{value:"Nodes in this deployment example",id:"nodes-in-this-deployment-example",level:2},{value:"Use cases and validation",id:"use-cases-and-validation",level:3},{value:"Control Node",id:"control-node-1",level:3},{value:"General requirements",id:"general-requirements",level:4},{value:"Hardware recommendation",id:"hardware-recommendation",level:4},{value:"Compute Node (HCI)",id:"compute-node-hci",level:3},{value:"Hardware recommendation",id:"hardware-recommendation-1",level:4},{value:"Network",id:"network",level:2},{value:"Scenario A: Not recommended for production",id:"scenario-a-not-recommended-for-production",level:3},{value:"Scenario B: Minimum recommended setup for small production environments",id:"scenario-b-minimum-recommended-setup-for-small-production-environments",level:3},{value:"Network adapters",id:"network-adapters",level:3},{value:"How to continue",id:"how-to-continue",level:2}];function c(e){const n={a:"a",blockquote:"blockquote",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"artcodix",children:"artcodix"})}),"\n",(0,r.jsx)(n.h2,{id:"preface",children:"Preface"}),"\n",(0,r.jsx)(n.p,{children:"This document describes a possible environment setup for a pre-production or minimal production setup.\nIn general hardware requirements can vary largely from environment to environment and this guide is not\na hardware sizing guide nor the best placement solution of services for every setup. This guide intends to\nprovide a starting point for a hardware based deployment of the SCS-IaaS reference implementation based on OSISM."}),"\n",(0,r.jsx)(n.h2,{id:"node-type-definitions",children:"Node type definitions"}),"\n",(0,r.jsx)(n.h3,{id:"control-node",children:"Control Node"}),"\n",(0,r.jsxs)(n.p,{children:["A control node runs all or most of the openstack services, that are responsible for API-services and the corresponding\nruntimes. These nodes are necessary for any user to interact with the cloud and to keep the cloud in a managed state.\nHowever these nodes are usualy ",(0,r.jsx)(n.strong,{children:"not"})," running user virtual machines.\nHence it is advisable to have the control nodes replicated. To have a RAFT-quorum three nodes are a good starting point."]}),"\n",(0,r.jsx)(n.h3,{id:"compute-node-hcino-hci",children:"Compute Node (HCI/no HCI)"}),"\n",(0,r.jsx)(n.h4,{id:"not-hyperconverged-infrastructure-no-hci",children:"Not Hyperconverged Infrastructure (no HCI)"}),"\n",(0,r.jsx)(n.p,{children:"Non HCI compute nodes are exclusively running user virtual machines. They are running no API-services, no storage daemons\nand no network routers, except for the necessary network infrastructure to connect virtual machines."}),"\n",(0,r.jsx)(n.h4,{id:"hyperconverged-infrastructure-hci",children:"Hyperconverged Infrastructure (HCI)"}),"\n",(0,r.jsx)(n.p,{children:"HCI nodes generally run at least user virtual machines and storage daemons. It is possible to place networking services\nhere as well but that is not considered good practice."}),"\n",(0,r.jsx)(n.h4,{id:"no-hci--vs-hci",children:"No HCI / vs HCI"}),"\n",(0,r.jsx)(n.p,{children:"Whether to use HCI nodes or not is in general not an easy question. For a getting started (pre production/smalles possible production)\nenvironment however, it is the most cost efficent option. Therefore we will continue with HCI nodes (compute + storage)."}),"\n",(0,r.jsx)(n.h3,{id:"storage-node",children:"Storage Node"}),"\n",(0,r.jsx)(n.p,{children:"A dedicated storage node runs only storage daemons. This can be necessary in larger deployments to protect the storage daemons from\nressource starvation through user workloads."}),"\n",(0,r.jsx)(n.p,{children:"Not used in this setup."}),"\n",(0,r.jsx)(n.h3,{id:"network-node",children:"Network Node"}),"\n",(0,r.jsx)(n.p,{children:"A dedicated network node runs the routing infrastructure for user virtual machines that connects these machines with provider / external\nnetworks. In larger deployments these can be useful to enhance scaling and improve network performance."}),"\n",(0,r.jsx)(n.p,{children:"Not used in this setup."}),"\n",(0,r.jsx)(n.h2,{id:"nodes-in-this-deployment-example",children:"Nodes in this deployment example"}),"\n",(0,r.jsx)(n.p,{children:"As mentioned before we are running three dedicated control nodes. To be able to fully test an openstack environment it is\nrecommended to run three compute nodes (HCI) as well. Technically you can get a setup running with just one compute node.\nSee the following chapter (Use cases and validation) for more information."}),"\n",(0,r.jsx)(n.h3,{id:"use-cases-and-validation",children:"Use cases and validation"}),"\n",(0,r.jsx)(n.p,{children:"The setup described allows for the following use cases / test cases:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Highly available control plane","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Control plane failure toleration test (Database, RabbitMQ, Ceph Mons, Routers)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Highly available user virtual clusters (e.g. Kubernetes clusters)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Compute host failure simulation"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Host aggregates / compute node grouping"}),"\n",(0,r.jsxs)(n.li,{children:["Host based storage replication (instead of OSD based)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Fully replicated storage / storage high availability test"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"control-node-1",children:"Control Node"}),"\n",(0,r.jsx)(n.h4,{id:"general-requirements",children:"General requirements"}),"\n",(0,r.jsx)(n.p,{children:"The control nodes do not run any user workloads. This means they are usually not sized as big as the compute nodes.\nRelevant metrics for control nodes are:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Fast and big enough discs. At least SATA-SSDs are recommended, NVMe will greatly improve the overall responsiveness."}),"\n",(0,r.jsx)(n.li,{children:"A rather large amount of memory to house all the caches for databases and queues."}),"\n",(0,r.jsx)(n.li,{children:"CPU performance should be average. A good compromise between amount of cores and speed should be used. However this is\nthe least important requirement on the list."}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"hardware-recommendation",children:"Hardware recommendation"}),"\n",(0,r.jsx)(n.p,{children:"The following server specs are just a starting point and can greatly vary between environments."}),"\n",(0,r.jsx)(n.p,{children:"Example:\n3x Dell R630/R640/R650 1HE Server"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Dual 8 Core 3,00 GHz Intel/AMD"}),"\n",(0,r.jsx)(n.li,{children:"128 GB RAM"}),"\n",(0,r.jsx)(n.li,{children:"2x 3,84 TB NVMe in (Software-) RAID 1"}),"\n",(0,r.jsx)(n.li,{children:"2x 10/25/40 GBit 2 Port SFP+/QSFP Network Cards"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"compute-node-hci",children:"Compute Node (HCI)"}),"\n",(0,r.jsxs)(n.p,{children:["The compute nodes in this scenario run all the user virtual workloads ",(0,r.jsx)(n.strong,{children:"and"})," the storage infrastructure. To make sure\nwe don't starve these nodes, they should be of decent size."]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"This setup takes local storage tests into consideration. The SCS-standards require certain flavors with very fast disc speed\nto house customer kubernetes control planes (etcd). These speeds are usually not achievable with shared storage. If you don't\nintend to test this scenario, you can skip the NVMe discs."}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"hardware-recommendation-1",children:"Hardware recommendation"}),"\n",(0,r.jsx)(n.p,{children:"The following server specs are just a starting point and can greatly vary between environments. The sizing of the nodes needs to fit\nthe expected workloads (customer VMs)."}),"\n",(0,r.jsx)(n.p,{children:"Example:\n3x Dell R730(xd)/R740(xd)/R750(xd)\nor\n3x Supermicro"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Dual 16 Core 2,8 GHz Intel/AMD"}),"\n",(0,r.jsx)(n.li,{children:"512 GB RAM"}),"\n",(0,r.jsx)(n.li,{children:"2x 3,84 TB NVMe in (Software-) RAID 1 if you want to have local storage available (optional)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"For hyperconverged ceph osds:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"4x 10 TB HDD -> This leads to ~30 TB of available HDD storage (optional)"}),"\n",(0,r.jsx)(n.li,{children:"4x 7,68 TB SSD -> This leads to ~25 TB of available SSD storage (optional)"}),"\n",(0,r.jsx)(n.li,{children:"2x 10/25/40 GBit 2 Port SFP+/QSFP Network Cards"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"network",children:"Network"}),"\n",(0,r.jsx)(n.p,{children:"The network infrastructure can vary a lot from setup to setup. This guide does not intend to define the best networking solution\nfor every cluster but rather give two possible scenarios."}),"\n",(0,r.jsx)(n.h3,{id:"scenario-a-not-recommended-for-production",children:"Scenario A: Not recommended for production"}),"\n",(0,r.jsx)(n.p,{children:"The smallest possible setup is just a single switch connected to all the nodes physically on one interface. The switch has to be\nVLAN enabled. Openstack recommends multiple isolated networks but the following are at least recommended to be split:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Out of Band network"}),"\n",(0,r.jsx)(n.li,{children:"Management networks"}),"\n",(0,r.jsx)(n.li,{children:"Storage backend network"}),"\n",(0,r.jsx)(n.li,{children:"Public / External network for virutal machines\nIf there is only one switch, these networks should all be defined as seperate VLANs. One of the networks can run in untagged default\nVLAN 1."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"scenario-b-minimum-recommended-setup-for-small-production-environments",children:"Scenario B: Minimum recommended setup for small production environments"}),"\n",(0,r.jsx)(n.p,{children:"The recommended setup uses two stacked switches connected in a LAG and at least three different physical network ports on each node."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Physical Network 1: VLANs for Public / External network for virutal machines, Management networks"}),"\n",(0,r.jsx)(n.li,{children:"Physical Network 2: Storage backend network"}),"\n",(0,r.jsx)(n.li,{children:"Physical Network 3: Out of Band network"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"network-adapters",children:"Network adapters"}),"\n",(0,r.jsx)(n.p,{children:"The out of band network does usually not need a lot of bandwith. Most modern servers come with 1Gbit/s adapters which are sufficient.\nFor small test clusters, it might also be sufficient to use 1Gbit/s networks for the other two physical networks.\nFor a minimum production cluster it is recommended to use the following:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Out of Band Network: 1Gbit/s"}),"\n",(0,r.jsx)(n.li,{children:"VLANs for Public / External network for virutal machines, Management networks: 10 / 25 Gbit/s"}),"\n",(0,r.jsx)(n.li,{children:"Storage backend network: 10 / 25 / 40 Gbit/s"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Whether you need a higher throughput for your storage backend services depends on your expected storage load. The faster the network\nthe faster storage data can be replicated between nodes. This usually leads to improved performance and better/faster fault tolerance."}),"\n",(0,r.jsx)(n.h2,{id:"how-to-continue",children:"How to continue"}),"\n",(0,r.jsxs)(n.p,{children:["After implementing the recommended deployment example hardware, you can continue with the ",(0,r.jsx)(n.a,{href:"https://docs.scs.community/docs/iaas/guides/deploy-guide/",children:"deployment guide"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>a});var t=o(96540);const r={},s=t.createContext(r);function i(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);