"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[78423],{94850:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>s,metadata:()=>a,toc:()=>h});const a=JSON.parse('{"id":"scs-0121-v1-Availability-Zones-Standard","title":"SCS Availability Zones","description":"Introduction","source":"@site/standards/scs-0121-v1-Availability-Zones-Standard.md","sourceDirName":".","slug":"/scs-0121-v1-Availability-Zones-Standard","permalink":"/standards/scs-0121-v1-Availability-Zones-Standard","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"SCS Availability Zones","type":"Standard","status":"Stable","stabilized_at":"2024-11-13T00:00:00.000Z","track":"IaaS"},"sidebar":"standards","previous":{"title":"scs-0121: SCS Availability Zones","permalink":"/standards/iaas/scs-0121"},"next":{"title":"W1","permalink":"/standards/scs-0121-w1-Availability-Zones-Standard"}}');var i=t(74848),o=t(28453);const s={title:"SCS Availability Zones",type:"Standard",status:"Stable",stabilized_at:new Date("2024-11-13T00:00:00.000Z"),track:"IaaS"},r=void 0,l={},h=[{value:"Introduction",id:"introduction",level:2},{value:"Terminology",id:"terminology",level:2},{value:"Motivation",id:"motivation",level:2},{value:"Design Considerations",id:"design-considerations",level:2},{value:"Scope of the Availability Zone Standard",id:"scope-of-the-availability-zone-standard",level:3},{value:"Options considered",id:"options-considered",level:3},{value:"Physical-based Availability Zones",id:"physical-based-availability-zones",level:4},{value:"AZs in Compute",id:"azs-in-compute",level:4},{value:"AZs in Storage",id:"azs-in-storage",level:4},{value:"AZs in Network",id:"azs-in-network",level:4},{value:"Cross-Attaching volumes from one AZ to another compute AZ",id:"cross-attaching-volumes-from-one-az-to-another-compute-az",level:3},{value:"Standard",id:"standard",level:2},{value:"Related Documents",id:"related-documents",level:2},{value:"Conformance Tests",id:"conformance-tests",level:2}];function d(e){const n={a:"a",admonition:"admonition",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",section:"section",sup:"sup",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsx)(n.p,{children:"On the IaaS level especially in OpenStack it is possible to group resources in Availability Zones.\nSuch Zones often are mapped to the physical layer of a deployment, such as e.g. physical separation of hardware or redundancy of power circuits or fire zones.\nBut how CSPs apply Availability Zones to the IaaS Layer in one deplyoment may differ widely.\nTherefore this standard will address the minimal requirements that need to be met, when creating Avaiability Zones."}),"\n",(0,i.jsx)(n.h2,{id:"terminology",children:"Terminology"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Term"}),(0,i.jsx)(n.th,{children:"Explanation"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Availability Zone"}),(0,i.jsx)(n.td,{children:"(also: AZ) internal representation of physical grouping of service hosts, which also lead to internal grouping of resources."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Fire Zone"}),(0,i.jsx)(n.td,{children:"A physical separation in a data center that will contain fire within it. Effectively stopping spreading of fire."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"PDU"}),(0,i.jsx)(n.td,{children:"Power Distribution Unit, used to distribute the power to all physical machines of a single server rack."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Compute"}),(0,i.jsx)(n.td,{children:"A generic name for the IaaS service, that manages virtual machines (e.g. Nova in OpenStack)."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Network"}),(0,i.jsx)(n.td,{children:"A generic name for the IaaS service, that manages network resources (e.g. Neutron in OpenStack)."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Storage"}),(0,i.jsx)(n.td,{children:"A generic name for the IaaS service, that manages the storage backends and virtual devices (e.g. Cinder in OpenStack)."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"BSI"}),(0,i.jsx)(n.td,{children:"German Federal Office for Information Security (Bundesamt f\xfcr Sicherheit in der Informationstechnik)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"CSP"}),(0,i.jsx)(n.td,{children:"Cloud Service Provider, provider managing the OpenStack infrastructure."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SDN"}),(0,i.jsx)(n.td,{children:"Software Defined Network, virtual networks managed by the networking service."})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"motivation",children:"Motivation"}),"\n",(0,i.jsx)(n.p,{children:"Redundancy is a non-trivial but relevant issue for a cloud deployment.\nFirst and foremost it is necessary to increase failure safety through redundancy on the physical layer.\nThe IaaS layer as the first abstraction layer from the hardware has an important role in this topic, too.\nThe grouping of redundant physical resources into Availability Zones on the IaaS level, gives customers the option to distribute their workload to different AZs which will result in a better failure safety.\nWhile CSPs already have some similarities in their grouping of physical resources to AZs, there are also differences.\nThis standard aims to reduce those differences and will clarify, what customers can expect from Availability Zones in IaaS."}),"\n",(0,i.jsxs)(n.p,{children:["Availability Zones in IaaS can be set up for Compute, Network and Storage separately while all may be referring to the same physical separation in a deployment.\nThis standard elaborates the necessity of having Availability Zones for each of these classes of resources.\nIt will also check the requirements customers may have, when thinking about Availability Zones in relation to the taxonomy of failure safety levels ",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),".\nThe result should enable CSPs to know when to create AZs to be SCS-compliant."]}),"\n",(0,i.jsx)(n.h2,{id:"design-considerations",children:"Design Considerations"}),"\n",(0,i.jsxs)(n.p,{children:["Availability Zones should represent parts of the same physical deployment that are independent of each other.\nThe maximum level of physical independence is achieved through putting physical machines into different fire zones.\nIn that case a failure case up to level 3 as described in the taxonomy of failure safety levels document",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-1",id:"user-content-fnref-1-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})})," will not lead to a complete outage of the deployment."]}),"\n",(0,i.jsx)(n.p,{children:"Having Availability Zones represent fire zones will also result in AZs being able to take workload from another AZ in a failure case of Level 3.\nSo that even the destruction of one Availability Zone will not automatically include the destruction of the other AZs."}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.p,{children:["Even with fire zones being physically designed to protect parts of a data center from severe destruction in case of a fire, this will not always succeed.\nAvailability Zones in Clouds are most of the time within the same physical data center.\nIn case of a big catastrophe like a huge fire or a flood the whole data center could be destroyed.\nAvailability Zones will not protect customers against these failure cases of level 4 of the taxonomy of failure safety",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-1",id:"user-content-fnref-1-3","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),"."]})}),"\n",(0,i.jsx)(n.p,{children:"Smaller deplyoments like edge deployments may not have more than one fire zone in a single location.\nTo include such deployments, it should not be required to use Availability Zones."}),"\n",(0,i.jsx)(n.p,{children:"Other physical factors that should be considered are the power supplies, internet connection, cooling and core routing.\nAvailability Zones were also used by CSPs as a representations of redundant PDUs.\nThat means there are deployments, which have Availability Zones per rack as each rack has it's own PDU and this was considered to be the single point of failure an AZ should represent.\nWhile this is also a possible measurement of independency it only provides failure safety for level 2.\nTherefore this standard should be very clear about which independency an AZ should represent and it should not be allowed to have different deployments with their Availability Zones representing different levels of failure safety."}),"\n",(0,i.jsx)(n.p,{children:"Additionally Availability Zones are available for Compute, Storage and Network services.\nThey behave differently for each of these resources and also when working across resource-based Availability Zones, e.g. attaching a volume from one AZ to a virtual machine in another AZ.\nFor each of these IaaS resource classes, it should be defined, under which circumstances Availability Zones should be used."}),"\n",(0,i.jsx)(n.h3,{id:"scope-of-the-availability-zone-standard",children:"Scope of the Availability Zone Standard"}),"\n",(0,i.jsxs)(n.p,{children:["When elaborating redundancy and failure safety in data centers, it is necessary to also define redundancy on the physical level.\nThere are already recommendations from the BSI for physical redundancy within a cloud deployment ",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-2",id:"user-content-fnref-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),".\nThis standard considers these recommendation as a basis, that is followed by most CSPs.\nSo this standard will not go into details, already provided by the CSP, but will rather concentrate on the IaaS layer and only have a coarse view on the physical layer.\nThe first assumtion from the recommendations of the BSI is that the destruction of one fire zone will not lead to an outage of all power lines (not PDUs), internet connections, core routers or cooling systems."]}),"\n",(0,i.jsx)(n.p,{children:"For the setup of Availability Zone this means, that within every AZ, there needs to be redundancy in core routers, internet connection, power lines and at least two separate cooling systems.\nThis should avoid having single points of failure within the Availability Zones.\nBut all this physical infrastructure can be the same over all Availability Zones in a deployment, when it is possible to survive the destruction of one fire zone."}),"\n",(0,i.jsx)(n.h3,{id:"options-considered",children:"Options considered"}),"\n",(0,i.jsx)(n.h4,{id:"physical-based-availability-zones",children:"Physical-based Availability Zones"}),"\n",(0,i.jsx)(n.p,{children:"It is possible standardize the usage of Availability Zones over all IaaS resources.\nThe downside from this is, that the IaaS resources behave so differently, that they have different requirements for redundancy and thus Availability Zones.\nThis is not the way to go.\nBesides that, it is already possible to create two physically separated deployments close to each other, connect them with each other and use regions to differ between the IaaS on both deployments."}),"\n",(0,i.jsx)(n.p,{children:"The question that remains is, what an Availability Zone should consist of?\nHaving one Availability Zone per fire zone gives the best level of failure safety, that can be achieved by CSPs.\nWhen building up on the relation between fire zone and physical redundancy recommendations as from the BSI, this combination is a good starting point, but need to be checked for the validity for the different IaaS resources."}),"\n",(0,i.jsx)(n.p,{children:"Another point is where Availability Zones can be instantiated and what the connection between AZs should look like.\nTo have a proper way to deal with outages of one AZ, where a second AZ can step in, a few requirements need to be met for the connection between those two AZs.\nThe amount data that needs to be transferred very fast in a failure case may be enormous, so there is a requirement for a high bandwidth between connected AZs.\nTho avoid additional failure cases the latency between those two Availability Zones need to be low.\nWith such requirements it is very clear that AZs should only reside within one (physical) region of an IaaS deployment."}),"\n",(0,i.jsx)(n.h4,{id:"azs-in-compute",children:"AZs in Compute"}),"\n",(0,i.jsx)(n.p,{children:"Compute Hosts are physical machines on which the compute service runs.\nA single virtual machine is always running on ONE compute host.\nRedundancy of virtual machines is either up to the layer above IaaS or up to the customers themself.\nHaving Availability Zones gives customers the possibility to let another virtual machine as a backup run within another Availability Zone."}),"\n",(0,i.jsx)(n.p,{children:"Customers will expect that in case of the failure of one Availability Zone all other AZs are still available.\nThe highest possible failure safety here is achieved, when Availability Zones for Compute are used for different fire zones."}),"\n",(0,i.jsx)(n.p,{children:"When the BSI recommendations are followed, there should already be redundancy in power lines, internet connection and cooling.\nAn outage of one of these physical resources will not affect the compute host and its resources for more than a minimal timeframe.\nBut when a single PDU is used for a rack, a failure of that PDU will result in an outage of all compute hosts in this rack.\nIn such a case it is not relevant, whether this rack represents a whole Availability Zone or is only part of a bigger AZ.\nAll virtual machines on the affected compute hosts will not be available and need to be restarted on other hosts, whether of the same Availability Zone or another."}),"\n",(0,i.jsx)(n.h4,{id:"azs-in-storage",children:"AZs in Storage"}),"\n",(0,i.jsx)(n.p,{children:"There are many different backends used for the storage service with Ceph being one of the most prominent backends.\nConfiguring those backends can already include to span one storage cluster over physical machines in different fire zones.\nIn combination with internal replication a configuration is possible, that already distributes replicas from volumes over different fire zones.\nWhen a deployment has such a configured storage backend, it already can provide safety in case of a failure of level 3."}),"\n",(0,i.jsx)(n.p,{children:"Using Availability Zones is also possible for the storage service, but configuring AZs, when having a configuration like above will not increase safety.\nNevertheless using AZs when having different backends in different fire zones will give customers a hint to backup volumes into storages of other AZs."}),"\n",(0,i.jsx)(n.p,{children:"Additionally when the BSI recommendations are followed, there should already be redundancy in power lines, internet connection and cooling.\nAn outage of one of these physical resources will not affect the storage host and its resources for more than a minimal timeframe.\nWhen internal replication is used, either through the IaaS or through the storage backend itself, the outage of a single PDU and such a single rack will not affect the availability of the data itself.\nAll these physical factors are not requiring the usage of an Availability Zone for Storage.\nAn increase of the level of failure safety will not be reached through AZs in these cases."}),"\n",(0,i.jsx)(n.p,{children:"Still it might be confusing when having deployments with compute AZs but without storage AZs.\nCSPs may need to communicate clearly up to which failure safety level their storage service can automatically have redundancy and from which level customers are responsible for the redundancy of their data."}),"\n",(0,i.jsx)(n.h4,{id:"azs-in-network",children:"AZs in Network"}),"\n",(0,i.jsx)(n.p,{children:"Virtualized network resources can typically be quickly and easily set up from building instructions.\nThose instructions are stored in the database of the networking service."}),"\n",(0,i.jsx)(n.p,{children:"If a physical machine, on which certain network resources are set up, is not available anymore, the resources can be rolled out on another physical machine, without being dependent on the current situation of the lost resources.\nThere might only be a loss of a few packets within the affected network resources."}),"\n",(0,i.jsxs)(n.p,{children:["With having Compute and Storage in a good state (e.g. through having fire zones with a compute AZ each and storage being replicated over the fire zones) there would be no downsides to omitting Availability Zones for the network service.\nIt might even be the opposite: Having resources running in certain Availability Zones might prevent them from being scheduled in other AZs",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-3",id:"user-content-fnref-3","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"3"})}),".\nAs the network resources like routers are bound to an AZ, in a failure case of one AZ all resource definitions might still be there in the database, while the implementation of those resources is gone.\nTrying to rebuild them in another AZ is not possible, because the scheduler will not allow them to be implemented in another AZ, than the one thats present in their definition.\nIn a failure case of one AZ this might lead to a lot of manual work to rebuild the SDN from scratch instead of just re-using the definitions."]}),"\n",(0,i.jsx)(n.p,{children:"Because of this severe side effect, this standard will make no recommendations about Network AZs."}),"\n",(0,i.jsx)(n.h3,{id:"cross-attaching-volumes-from-one-az-to-another-compute-az",children:"Cross-Attaching volumes from one AZ to another compute AZ"}),"\n",(0,i.jsx)(n.p,{children:"Without the networking AZs we only need to take a closer look into attaching volumes to virtual machines across AZs."}),"\n",(0,i.jsx)(n.p,{children:"When there is more than one Storage Availability Zone, those AZs do normally align with the Compute Availability Zones.\nThis means that fire zone 1 contains compute AZ 1 and storage AZ 1 , fire zone 2 contains compute AZ 2 and storage AZ 2 and the same for fire zone 3.\nIt is possible to allow or forbid cross-attaching volumes from one storage Availability Zone to virtual machines in another AZ.\nIf it is not allowed, then the creation of volume-based virtual machines will fail, if there is no space left for VMs in the corresponding Availability Zone.\nWhile this may be unfortunate, it gives customers a very clear picture of an Availability Zone.\nIt clarifies that having a virtual machine in another AZ also requires having a backup or replication of volumes in the other storage AZ.\nThen this backup or replication can be used to create a new virtual machine in the other AZ."}),"\n",(0,i.jsx)(n.p,{children:"It seems to be a good decision to not encourage CSPs to allow cross-attach.\nCurrently CSPs also do not seem to widely use it."}),"\n",(0,i.jsx)(n.h2,{id:"standard",children:"Standard"}),"\n",(0,i.jsx)(n.p,{children:"If Compute Availability Zones are used, they MUST be in different fire zones.\nAvailabilty Zones for Storage SHOULD be setup, if there is no storage backend used that can span over different fire zones and automatically replicate the data.\nOtherwise a single Availabilty Zone for Storage SHOULD be configured."}),"\n",(0,i.jsx)(n.p,{children:"If more than one Availability Zone for Storage is set up, the attaching of volumes from one Storage Availability Zone to another Compute Availability Zone (cross-attach) SHOULD NOT be possible."}),"\n",(0,i.jsx)(n.p,{children:"Within each Availability Zone:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"there MUST be redundancy in power supply, as in line into the deployment"}),"\n",(0,i.jsx)(n.li,{children:"there MUST be redundancy in external connection (e.g. internet connection or WAN-connection)"}),"\n",(0,i.jsx)(n.li,{children:"there MUST be redundancy in core routers"}),"\n",(0,i.jsx)(n.li,{children:"there SHOULD be redundancy in the cooling system"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"AZs SHOULD only occur within the same region and have a low-latency interconnection with a high bandwidth."}),"\n",(0,i.jsx)(n.h2,{id:"related-documents",children:"Related Documents"}),"\n",(0,i.jsx)(n.p,{children:"The taxonomy of failsafe levels can be used to get an overview over the levels of failure safety in a deployment(TODO: link after DR is merged.)"}),"\n",(0,i.jsxs)(n.p,{children:["The BSI can be consulted for further information about ",(0,i.jsx)(n.a,{href:"https://www.bsi.bund.de/DE/Themen/Unternehmen-und-Organisationen/Standards-und-Zertifizierung/IT-Grundschutz/IT-Grundschutz-Kompendium/Elementare-Gefaehrdungen/elementare-gefaehrdungen_node.html",children:"failure risks"}),", ",(0,i.jsx)(n.a,{href:"https://www.bsi.bund.de/SharedDocs/Downloads/DE/BSI/Grundschutz/BSI_Standards/standard_200_3.pdf?__blob=publicationFile&v=2",children:"risk analysis for a datacenter"})," or ",(0,i.jsx)(n.a,{href:"https://www.bsi.bund.de/SharedDocs/Downloads/DE/BSI/RZ-Sicherheit/RZ-Verfuegbarkeitsmassnahmen.pdf?__blob=publicationFile&v=9",children:"measures for availability"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"conformance-tests",children:"Conformance Tests"}),"\n",(0,i.jsx)(n.p,{children:"As this standard will not require Availability Zones to be present, we cannot automatically test the conformance.\nThe other parts of the standard are physical or internal and could only be tested through an audit.\nWhether there are fire zones physically available is a criteria that will never change for a single deployment - this only needs to be audited once.\nIt might be possible to also use Gaia-X Credentials to provide such information, which then could be tested."}),"\n","\n",(0,i.jsxs)(n.section,{"data-footnotes":!0,className:"footnotes",children:[(0,i.jsx)(n.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{id:"user-content-fn-1",children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://github.com/SovereignCloudStack/standards/pull/579",children:"Taxonomy of Failsafe Levels in SCS (TODO: change link as soon as taxonomy is merged)"})," ",(0,i.jsx)(n.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})," ",(0,i.jsxs)(n.a,{href:"#user-content-fnref-1-2","data-footnote-backref":"","aria-label":"Back to reference 1-2",className:"data-footnote-backref",children:["\u21a9",(0,i.jsx)(n.sup,{children:"2"})]})," ",(0,i.jsxs)(n.a,{href:"#user-content-fnref-1-3","data-footnote-backref":"","aria-label":"Back to reference 1-3",className:"data-footnote-backref",children:["\u21a9",(0,i.jsx)(n.sup,{children:"3"})]})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{id:"user-content-fn-2",children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://www.bsi.bund.de/SharedDocs/Downloads/DE/BSI/RZ-Sicherheit/RZ-Verfuegbarkeitsmassnahmen.pdf?__blob=publicationFile&v=9",children:"Availability recommendations from the BSI"})," ",(0,i.jsx)(n.a,{href:"#user-content-fnref-2","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{id:"user-content-fn-3",children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://docs.openstack.org/neutron/latest/admin/ovn/availability_zones.html",children:"Availability Zones in Neutron for OVN"})," ",(0,i.jsx)(n.a,{href:"#user-content-fnref-3","data-footnote-backref":"","aria-label":"Back to reference 3",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n"]}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>r});var a=t(96540);const i={},o=a.createContext(i);function s(e){const n=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);