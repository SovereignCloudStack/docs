"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[44684],{29973:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"scs-0411-v1-publishing_method_for_metering_data","title":"Push-based approach for providing usage data","description":"for more info. --\x3e","source":"@site/standards/scs-0411-v1-publishing_method_for_metering_data.md","sourceDirName":".","slug":"/scs-0411-v1-publishing_method_for_metering_data","permalink":"/standards/scs-0411-v1-publishing_method_for_metering_data","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Push-based approach for providing usage data","type":"Decision Record","status":"Draft","track":"Ops"},"sidebar":"standards","previous":{"title":"scs-0411: Push-based approach for providing usage data","permalink":"/standards/ops/scs-0411"},"next":{"title":"scs-0412: Exposition of IaaS metering data as JSON","permalink":"/standards/ops/scs-0412"}}');var i=s(74848),o=s(28453);const a={title:"Push-based approach for providing usage data",type:"Decision Record",status:"Draft",track:"Ops"},r=void 0,l={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Definitions",id:"definitions",level:2},{value:"Motivation",id:"motivation",level:2},{value:"Design Considerations",id:"design-considerations",level:2},{value:"Options",id:"options",level:3},{value:"Push-based flow",id:"push-based-flow",level:4},{value:"Poll-based flow",id:"poll-based-flow",level:4},{value:"Open questions",id:"open-questions",level:2},{value:"Decision",id:"decision",level:2},{value:"Related Documents",id:"related-documents",level:2},{value:"Conformance Tests",id:"conformance-tests",level:2}];function c(e){const n={h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsx)(n.p,{children:"In the past we noticed missing events in the telemetry stack of OpenStack.\nThis results in situations where the Cloud Service Provider (CSP)\nmay think that a resource is still in use while the owner shut it down,\nor may not be aware of a resource which has been created."}),"\n",(0,i.jsx)(n.p,{children:"Such inaccurate data is a problem,\nwhen it is supposed to be used for billing purposes."}),"\n",(0,i.jsx)(n.p,{children:"This document discusses how such metering data should be made available\nto the cloud service provider\nfor forwarding into their own billing solution."}),"\n",(0,i.jsx)(n.h2,{id:"definitions",children:"Definitions"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Push-based flow:\nIn a push-based flow,\nthe system generating data actively sends that data to a consumer."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Pull-based flow:\nIn a pull-based flow,\nthe system generating data waits for the system consuming the data\nto ask for that data."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Metering:\nCollection of usage data of a cloud,\nfor the specific purpose of creating invoices\nto bill customers for the resources they have allocated."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Billing:\nThe entire process of creation, management and sending of invoices\ngenerated from metering data."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"motivation",children:"Motivation"}),"\n",(0,i.jsx)(n.p,{children:"Being able to bill users\nfor the resources they use\nis a prerequisite for commercially operating a cloud.\nThe SCS project wants to deliver a cloud stack\nwhich can be used for that purpose,\nhence providing reliable metering data is a requirement."}),"\n",(0,i.jsx)(n.p,{children:"We generally expect that cloud providers already have\nsome kind of customer-relation management or billing system in place.\nHence, it is important that the SCS is not too opinionated\non this implementation detail,\nbut provides a system which can easily interface with other systems."}),"\n",(0,i.jsx)(n.p,{children:"This is similar to how the SCS specified the monitoring stack."}),"\n",(0,i.jsx)(n.h2,{id:"design-considerations",children:"Design Considerations"}),"\n",(0,i.jsx)(n.p,{children:"The following requirements exist for the process for providing metrics to the cloud service provider:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"MUST scale to different timescales:\nWe expect to have metrics which change frequently (e.g. object store usage)\nand metrics which change rarely (e.g. cinder volume sizes)."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"options",children:"Options"}),"\n",(0,i.jsx)(n.h4,{id:"push-based-flow",children:"Push-based flow"}),"\n",(0,i.jsx)(n.p,{children:"In a push-based flow,\nthe to-be-implemented metering system pushes events to the sink\nas soon as it is reasonably confident\nthat the event can be used for billing purposes."}),"\n",(0,i.jsx)(n.h4,{id:"poll-based-flow",children:"Poll-based flow"}),"\n",(0,i.jsx)(n.p,{children:"In the poll-based flow,\nwhichever system the CSP runs would be responsible for polling the metering API\nin a frequency sufficient to capture all data with sufficient granularity."}),"\n",(0,i.jsx)(n.h2,{id:"open-questions",children:"Open questions"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"What is necessary to extend the availability of sending to various sinks?"}),"\n",(0,i.jsx)(n.li,{children:"How does the configuration look like that is needed to push to a sink from the same type that will be already implemented?"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"decision",children:"Decision"}),"\n",(0,i.jsx)(n.p,{children:"As we need to support very different time scales of data,\nthe push-based flow is more suitable:\nit allows the producer of the data,\nwhich knows about the interval in which it changes,\nwhen to provide new data to the consumer.\nIn contrast to that,\na poll-based flow would need the consumer to know about change intervals,\nor alternatively poll in the highest change frequency ever expected."}),"\n",(0,i.jsx)(n.h2,{id:"related-documents",children:"Related Documents"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"SCS-0410-v1"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"conformance-tests",children:"Conformance Tests"}),"\n",(0,i.jsx)(n.p,{children:"None (this is a decision record)."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>r});var t=s(96540);const i={},o=t.createContext(i);function a(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);