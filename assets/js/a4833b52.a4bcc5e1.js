"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[57753],{57344:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"scs-0104-v1-standard-images","title":"SCS Standard Images","description":"The SCS-0104 standard establishes guidelines for virtual machine images in Sovereign Cloud Stack (SCS) environments,\\nspecifying mandatory, recommended, and optional images via a YAML file, ensuring interoperability and streamlined\\ndeployments. It mandates that image upload via Glance must be allowed, ensuring flexibility for users. The standard\'s\\nmachine-readable document facilitates automated processing for compliance and integration purposes, promoting\\nconsistency and reliability in cloud environments.\\n","source":"@site/standards/scs-0104-v1-standard-images.md","sourceDirName":".","slug":"/scs-0104-v1-standard-images","permalink":"/standards/scs-0104-v1-standard-images","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"SCS Standard Images","type":"Procedural","status":"Stable","stabilized_at":"2024-02-21T00:00:00.000Z","track":"IaaS","description":"The SCS-0104 standard establishes guidelines for virtual machine images in Sovereign Cloud Stack (SCS) environments,\\nspecifying mandatory, recommended, and optional images via a YAML file, ensuring interoperability and streamlined\\ndeployments. It mandates that image upload via Glance must be allowed, ensuring flexibility for users. The standard\'s\\nmachine-readable document facilitates automated processing for compliance and integration purposes, promoting\\nconsistency and reliability in cloud environments.\\n"},"sidebar":"standards","previous":{"title":"scs-0104: SCS Standard Images","permalink":"/standards/iaas/scs-0104"},"next":{"title":"W1","permalink":"/standards/scs-0104-w1-standard-images-implementation"}}');var a=i(74848),t=i(28453);const o={title:"SCS Standard Images",type:"Procedural",status:"Stable",stabilized_at:new Date("2024-02-21T00:00:00.000Z"),track:"IaaS",description:"The SCS-0104 standard establishes guidelines for virtual machine images in Sovereign Cloud Stack (SCS) environments,\nspecifying mandatory, recommended, and optional images via a YAML file, ensuring interoperability and streamlined\ndeployments. It mandates that image upload via Glance must be allowed, ensuring flexibility for users. The standard's\nmachine-readable document facilitates automated processing for compliance and integration purposes, promoting\nconsistency and reliability in cloud environments.\n"},d=void 0,r={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Motivation",id:"motivation",level:2},{value:"Uploading custom images",id:"uploading-custom-images",level:2},{value:"Standard images YAML",id:"standard-images-yaml",level:2},{value:"Image specification, single image",id:"image-specification-single-image",level:3},{value:"Image specification, class of images",id:"image-specification-class-of-images",level:3},{value:"Full example",id:"full-example",level:2},{value:"Lifecycle considerations",id:"lifecycle-considerations",level:2},{value:"YAML lifecycle",id:"yaml-lifecycle",level:3},{value:"Image lifecycle",id:"image-lifecycle",level:3},{value:"Conformance Tests",id:"conformance-tests",level:2},{value:"Operational tooling",id:"operational-tooling",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.a,{href:"https://scs.community",children:"Sovereign Cloud Stack (SCS)"})," provides standards for a range of cloud infrastructure types.\nIt strives for interoperable and sovereign cloud offerings which can be deployed and used by a wide range of organizations and individuals."]}),"\n",(0,a.jsx)(n.p,{children:"To this end, SCS unifies the naming and sourcing of virtual machine images, and for certain images their presence is mandated or recommended."}),"\n",(0,a.jsx)(n.h2,{id:"motivation",children:"Motivation"}),"\n",(0,a.jsxs)(n.p,{children:["Following the example of the ",(0,a.jsx)(n.a,{href:"/standards/scs-0003-v1-sovereign-cloud-standards-yaml",children:"SCS standards YAML"}),",\nthis standard establishes, by means of a YAML file, a mechanism with the following main objectives:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"to maintain a list of mandatory, recommended, and optional images, which also fixes the source location,"}),"\n",(0,a.jsx)(n.li,{children:"to provide a machine-readable document for further processing (e.g. for a compliance tool suite or continuous integration)."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"uploading-custom-images",children:"Uploading custom images"}),"\n",(0,a.jsx)(n.p,{children:"Image upload via Glance MUST be allowed based on a fair-use policy."}),"\n",(0,a.jsx)(n.h2,{id:"standard-images-yaml",children:"Standard images YAML"}),"\n",(0,a.jsxs)(n.p,{children:["The YAML file MUST contain the key ",(0,a.jsx)(n.code,{children:"images"}),", whose value is a list of objects. Each object has one of two forms, as described below."]}),"\n",(0,a.jsx)(n.h3,{id:"image-specification-single-image",children:"Image specification, single image"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Key"}),(0,a.jsx)(n.th,{children:"Type"}),(0,a.jsx)(n.th,{children:"Description"}),(0,a.jsx)(n.th,{children:"Example"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"name"})}),(0,a.jsx)(n.td,{children:"String"}),(0,a.jsx)(n.td,{children:"Name of the image"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:'"Debian 12"'})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"status"})}),(0,a.jsxs)(n.td,{children:["String (",(0,a.jsx)(n.em,{children:"optional"}),")"]}),(0,a.jsxs)(n.td,{children:[(0,a.jsx)(n.code,{children:"optional"})," (default), ",(0,a.jsx)(n.code,{children:"mandatory"})," or ",(0,a.jsx)(n.code,{children:"recommended"})]}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:'"recommended"'})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"source"})}),(0,a.jsx)(n.td,{children:"String"}),(0,a.jsx)(n.td,{children:"Prefix of the source URL"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:'"https://cloud.debian.org/images/cloud/bookworm/"'})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{}),(0,a.jsx)(n.td,{children:"OR: List of strings"}),(0,a.jsx)(n.td,{children:"multiple possible prefixes"}),(0,a.jsx)(n.td,{children:"(see full example below)"})]})]})]}),"\n",(0,a.jsx)(n.p,{children:"The meaning of this specification is as follows."}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["If the status is ",(0,a.jsx)(n.code,{children:"mandatory"}),", then an image with the name given via ",(0,a.jsx)(n.code,{children:"name"})," MUST be present."]}),"\n",(0,a.jsxs)(n.li,{children:["If the status is ",(0,a.jsx)(n.code,{children:"recommended"}),", then an image with the name given via ",(0,a.jsx)(n.code,{children:"name"})," SHOULD be present."]}),"\n",(0,a.jsxs)(n.li,{children:["Regardless of the status:\nif an image with the name given is present, then its ",(0,a.jsx)(n.code,{children:"image_source"})," property\n(as described in the ",(0,a.jsx)(n.a,{href:"/standards/scs-0102-v1-image-metadata",children:"Image Metadata standard"}),")\nMUST start with one of the prefixes given via ",(0,a.jsx)(n.code,{children:"source"}),"."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"image-specification-class-of-images",children:"Image specification, class of images"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Key"}),(0,a.jsx)(n.th,{children:"Type"}),(0,a.jsx)(n.th,{children:"Description"}),(0,a.jsx)(n.th,{children:"Example"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"name"})}),(0,a.jsx)(n.td,{children:"String"}),(0,a.jsx)(n.td,{children:"Name of the class of images"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:'"ubuntu-2204-kube"'})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"name_scheme"})}),(0,a.jsx)(n.td,{children:"String (regex)"}),(0,a.jsx)(n.td,{children:"Regular expression for the image name"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:'"ubuntu-2204-kube-v[0-9].[0-9]+(.[0-9]+)?"'})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"status"})}),(0,a.jsxs)(n.td,{children:["String (",(0,a.jsx)(n.em,{children:"optional"}),")"]}),(0,a.jsxs)(n.td,{children:[(0,a.jsx)(n.code,{children:"optional"})," (default), ",(0,a.jsx)(n.code,{children:"mandatory"})," or ",(0,a.jsx)(n.code,{children:"recommended"})]}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:'"recommended"'})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"source"})}),(0,a.jsx)(n.td,{children:"String"}),(0,a.jsx)(n.td,{children:"Prefix of the source URL"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:'"https://swift.services.a.regiocloud.tech"'})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{}),(0,a.jsx)(n.td,{children:"OR: List of strings"}),(0,a.jsx)(n.td,{children:"multiple possible prefixes"}),(0,a.jsx)(n.td,{children:"(see full example below)"})]})]})]}),"\n",(0,a.jsx)(n.p,{children:"The meaning of this specification is as follows:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["If the status is ",(0,a.jsx)(n.code,{children:"mandatory"}),", then at least one image MUST be present whose name\nmatches the regular expression given via ",(0,a.jsx)(n.code,{children:"name_scheme"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["If the status is ",(0,a.jsx)(n.code,{children:"recommended"}),", then at least one image SHOULD be present whose name\nmatches the regular expression given via ",(0,a.jsx)(n.code,{children:"name_scheme"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Regardless of the status:\nfor any image whose name matches the regular expression given via ",(0,a.jsx)(n.code,{children:"name_scheme"}),",\nits ",(0,a.jsx)(n.code,{children:"image_source"})," property MUST start with one of the prefixes given via ",(0,a.jsx)(n.code,{children:"source"}),"."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"full-example",children:"Full example"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'images:\n- name: "Ubuntu 22.04"\n  source:\n  - https://cloud-images.ubuntu.com/releases/jammy/\n  - https://cloud-images.ubuntu.com/jammy/\n  status: mandatory\n- name: "ubuntu-capi-image"\n  name_scheme: "ubuntu-capi-image v[0-9]\\\\.[0-9]+(\\\\.[0-9]+)?"\n  source: https://swift.services.a.regiocloud.tech/swift/v1/AUTH_b182637428444b9aa302bb8d5a5a418c/openstack-k8s-capi-images/ubuntu-2204-kube\n  status: recommended\n- name: "Ubuntu 20.04"\n  source:\n  - https://cloud-images.ubuntu.com/releases/focal/\n  - https://cloud-images.ubuntu.com/focal/\n- name: "Debian 12"\n  source:\n  - https://cloud.debian.org/images/cloud/bookworm/\n  - https://cdimage.debian.org/cdimage/cloud/bookworm/\n- name: "Debian 11"\n  source:\n  - https://cloud.debian.org/images/cloud/bullseye/\n  - https://cdimage.debian.org/cdimage/cloud/bullseye/\n'})}),"\n",(0,a.jsx)(n.p,{children:"This example provides allowable source prefixes for two Debian versions, two Ubuntu\nversions, and for any version of the Kubernetes cloud API provider. Only the latter is\nrecommended, while only Ubuntu 22.04 is mandatory."}),"\n",(0,a.jsx)(n.h2,{id:"lifecycle-considerations",children:"Lifecycle considerations"}),"\n",(0,a.jsx)(n.h3,{id:"yaml-lifecycle",children:"YAML lifecycle"}),"\n",(0,a.jsxs)(n.p,{children:["The YAML file is generally located under\n",(0,a.jsx)(n.a,{href:"https://github.com/SovereignCloudStack/standards/blob/main/Tests/iaas/",children:"https://github.com/SovereignCloudStack/standards/blob/main/Tests/iaas/"}),"."]}),"\n",(0,a.jsx)(n.p,{children:"Any change that could render existing installations non-conformant (i.e., when new\nspecifications are added, when the name scheme of a specification is changed to\nmatch more names than before, when the status of an existing specification changes to\nmandatory, or when some source prefix is removed) requires a new YAML file to be created.\nAs a consequence, any currently valid certificates stay valid; the change can only take\neffect in a new version of the certificate in question, if so desired."}),"\n",(0,a.jsx)(n.h3,{id:"image-lifecycle",children:"Image lifecycle"}),"\n",(0,a.jsx)(n.p,{children:"It is important to note that this standard does not prohibit any images, and neither\ndoes it preclude the operator from providing any and all optional images."}),"\n",(0,a.jsx)(n.p,{children:"It is possible that a specification is mandatory in one version and non-mandatory in the\nnext version. This standard makes no statement as to what is supposed to happen to the\ncorresponding images in a live cloud environment. It is recommended to keep the\nonce-mandatory images in the live environment. As for new environments, it is up to the\noperator whether to provide any or all of these images, as stated above."}),"\n",(0,a.jsx)(n.h2,{id:"conformance-tests",children:"Conformance Tests"}),"\n",(0,a.jsxs)(n.p,{children:["The script ",(0,a.jsx)(n.code,{children:"images-openstack.py"})," will read the lists of mandatory and recommended images\nfrom a yaml file provided as command-line argument, connect to an OpenStack installation,\nand check whether the images are present. Missing images will be reported on various\nlogging channels: error for mandatory, info for recommended images. Additionally, images\nwhose ",(0,a.jsx)(n.code,{children:"image_source"})," does not conform with the specifications will be reported on the\nerror channel. The return code will be non-zero if the test could not be performed or\nif any errors have been reported."]}),"\n",(0,a.jsx)(n.h2,{id:"operational-tooling",children:"Operational tooling"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.a,{href:"https://github.com/osism/openstack-image-manager",children:"openstack-image-manager"})," is able to\ncreate all standard, mandatory SCS images for you given image definitions from a YAML file."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>d});var s=i(96540);const a={},t=s.createContext(a);function o(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);