<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-iaas/deployment-examples/cloud-in-a-box/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">Cloud in a Box | One platform â€” standardized, built and operated by many.</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.scs.community/img/scs-og-basic.png"><meta data-rh="true" name="twitter:image" content="https://docs.scs.community/img/scs-og-basic.png"><meta data-rh="true" property="og:url" content="https://docs.scs.community/docs/iaas/deployment-examples/cloud-in-a-box/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Cloud in a Box | One platform â€” standardized, built and operated by many."><meta data-rh="true" name="description" content="ðŸ’¡ Cloud in a Box (CiaB) is a minimalistic installation of the latest stable OSISM release with only services which are needed to"><meta data-rh="true" property="og:description" content="ðŸ’¡ Cloud in a Box (CiaB) is a minimalistic installation of the latest stable OSISM release with only services which are needed to"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.scs.community/docs/iaas/deployment-examples/cloud-in-a-box/"><link data-rh="true" rel="alternate" href="https://docs.scs.community/docs/iaas/deployment-examples/cloud-in-a-box/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.scs.community/docs/iaas/deployment-examples/cloud-in-a-box/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="One platform â€” standardized, built and operated by many. RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="One platform â€” standardized, built and operated by many. Atom Feed">








<link rel="preconnect" href="https://matomo.scs.community/">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setDocumentTitle",document.domain+"/"+document.title]),_paq.push(["disableCookies"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var e="https://matomo.scs.community/";_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","2"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",p.parentNode.insertBefore(t,p)}()</script><link rel="stylesheet" href="/assets/css/styles.0eddb8c7.css">
<script src="/assets/js/runtime~main.ede2d0ee.js" defer="defer"></script>
<script src="/assets/js/main.ff9c6252.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="SCS" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="SCS" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/standards">Standards</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">For Operators</a><a class="navbar__item navbar__link" href="/contributor-docs">For Contributors</a><a class="navbar__item navbar__link" href="/user-docs">For Users</a><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/docs/faq">FAQ</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/SovereignCloudStack/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/iaas-layer">IaaS Layer</a><button aria-label="Collapse sidebar category &#x27;IaaS Layer&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/iaas/guides/concept-guide/">Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/components">Components</a><button aria-label="Expand sidebar category &#x27;Components&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/deployment-examples">Deployment Examples</a><button aria-label="Collapse sidebar category &#x27;Deployment Examples&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" tabindex="0" href="/docs/iaas/deployment-examples/cloud-in-a-box/">Cloud in a Box</a><button aria-label="Collapse sidebar category &#x27;Cloud in a Box&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iaas/deployment-examples/cloud-in-a-box/running-on-a-virtual-machine">Running on a virtual machine</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/iaas/deployment-examples/testbed/">Testbed</a><button aria-label="Expand sidebar category &#x27;Testbed&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/iaas/deployment-examples/5G Campusnetz/preface">5G Campusnetz</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/iaas/deployment-examples/artcodix/">artcodix</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/container/">Container Layer</a><button aria-label="Expand sidebar category &#x27;Container Layer&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/operating-scs">Operating SCS</a><button aria-label="Expand sidebar category &#x27;Operating SCS&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/iam/">Identity and Access Management (IAM)</a><button aria-label="Expand sidebar category &#x27;Identity and Access Management (IAM)&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/turnkey-solution">Turnkey Solution</a><button aria-label="Expand sidebar category &#x27;Turnkey Solution&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/releases">Releases</a><button aria-label="Expand sidebar category &#x27;Releases&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq/">FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/glossary">Glossary</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/iaas-layer"><span itemprop="name">IaaS Layer</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/deployment-examples"><span itemprop="name">Deployment Examples</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Cloud in a Box</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Cloud in a Box</h1></header>
<p>ðŸ’¡ Cloud in a Box (CiaB) is a minimalistic installation of the latest stable OSISM release with only services which are needed to
make it work with Kubernetes. It is intended for use as a development system on bare-metal or for use in edge environments or for
training purposes. Its flexibility makes it ideal for building, testing, and refining cloud infrastructure setups in controlled
environments, enabling teams to experiment with different configurations and scenarios before deploying them to production</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>At the moment the secrets are stored in plain text in the <a href="https://github.com/osism/cloud-in-a-box" target="_blank" rel="noopener noreferrer">osism/cloud-in-a-box</a>
repository and are not secure. Do not use for public accessible systems. In the future, the secrets will be generated automatically.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">â€‹</a></h2>
<p>The system to be used as Cloud in a Box must fulfill these minimum requirements.</p>
<table><thead><tr><th style="text-align:left">Type of resource</th><th style="text-align:left">Amount</th><th style="text-align:left">Note</th></tr></thead><tbody><tr><td style="text-align:left">CPU</td><td style="text-align:left">at least 1 socket with 4 cores</td><td style="text-align:left">More is better here. This is the minimum where you can&#x27;t use much payload (LBaaS, VMs). The use of Kubernetes with Cluster API is not possible with this minimum size.</td></tr><tr><td style="text-align:left">RAM</td><td style="text-align:left">at least 32 GByte</td><td style="text-align:left">More is better here. In principle, it also works with 8 GByte, but then no payload (LBaaS, VMs) can be used. Kubernetes with Cluster API cannot be used then.</td></tr><tr><td style="text-align:left">Storage</td><td style="text-align:left">at least 1 TByte</td><td style="text-align:left">Has to be available as <code>/dev/sda</code> or <code>/dev/nvme0n1</code>. Less than 1 TByte is also possible, the smaller the less storage is available for use in Ceph.</td></tr><tr><td style="text-align:left">Network</td><td style="text-align:left">at least 1 network interface (DHCP and internet access)</td><td style="text-align:left">An optional <a href="#use-of-2nd-nic-for-external-network">2nd network interface can be used for external connectivity</a>.</td></tr><tr><td style="text-align:left">USB stick</td><td style="text-align:left">at least 2 GByte</td><td style="text-align:left">Installation media for Cloud in a Box bootstrapping</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="types">Types<a href="#types" class="hash-link" aria-label="Direct link to Types" title="Direct link to Types">â€‹</a></h2>
<p>There are three types of Cloud in a Box.</p>
<ol>
<li>
<p>The <strong>sandbox</strong> type is intended for developers and demonstrations. A full OSISM installation
is one there which also includes Ceph and OpenSearch, for example. In the course of the
installation, necessary images, networks, etc. are also created.</p>
</li>
<li>
<p>The <strong>edge</strong> type is intended to be deployed as an appliance to provide an edge cloud on a
single node. Compared to the sandbox, certain services are not provided there or are
implemented differently. For example, OpenSearch is not deployed because the logs are
delivered to a central location. The storage backend will also be implemented differently there
in the future instead of Ceph.</p>
</li>
<li>
<p>The <strong>kubernetes</strong> type is intended to be deployed as an appliance to provide a edge Kubernetes
cluster on a single node.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="automated-installation-recommended">Automated installation (recommended)<a href="#automated-installation-recommended" class="hash-link" aria-label="Direct link to Automated installation (recommended)" title="Direct link to Automated installation (recommended)">â€‹</a></h3>
<p>The images currently download and install the
<a href="https://github.com/osism/cloud-in-a-box" target="_blank" rel="noopener noreferrer">latest state of the installation scripts</a>,
therefore it is mandatory to update the installation media at least when the underlying Ubuntu operating
system release changes. The installation of older releases is currently not supported.</p>
<ol>
<li>
<p>Download one of the Cloud in a Box images of type sandbox</p>
<ul>
<li><a href="https://swift.services.a.regiocloud.tech/swift/v1/AUTH_b182637428444b9aa302bb8d5a5a418c/osism-node-image/ubuntu-autoinstall-cloud-in-a-box-1.iso" target="_blank" rel="noopener noreferrer">ubuntu-autoinstall-cloud-in-a-box-1.iso</a> (with first block device as <code>/dev/sda</code>)</li>
<li><a href="https://swift.services.a.regiocloud.tech/swift/v1/AUTH_b182637428444b9aa302bb8d5a5a418c/osism-node-image/ubuntu-autoinstall-cloud-in-a-box-2.iso" target="_blank" rel="noopener noreferrer">ubuntu-autoinstall-cloud-in-a-box-2.iso</a> (with first block device as <code>/dev/nvme0n1</code>)</li>
</ul>
</li>
<li>
<p>Use a tool like <a href="https://etcher.balena.io" target="_blank" rel="noopener noreferrer">balenaEtcher</a> or <code>dd</code> to create a bootable USB stick with the Cloud
in a Box image.</p>
</li>
<li>
<p>Boot from the USB stick. Make sure that the boot from USB is activated in the BIOS.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>When booting from this USB stick, all data on the hard disks will be destroyed
without confirmation.</p></div></div>
</li>
<li>
<p>The installation of the operating system (Ubuntu 22.04) will start and take a few minutes. After that the system
will shutdown.</p>
</li>
<li>
<p>The first start of the system</p>
<ul>
<li>Remove the USB storage device
(The USB stick is only needed again if the Cloud in a Box system is to be fully reinstalled.)</li>
<li>Connect the first network interface to an ethernet interface that provides access to the internet via DHCP configuration</li>
<li>Boot the system from the internal hard disk device</li>
</ul>
</li>
<li>
<p>The deployment will start. This takes some time and the system will shutdown when the
deployment is finished. This takes roughly an hour, possibly longer depending on the
hardware and internet connection.</p>
</li>
<li>
<p>Start the system again. System is ready for use, by default DHCP is tried on the first network device.</p>
</li>
<li>
<p>Login via SSH. Use the user <code>dragon</code> with the password <code>password</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ssh dragon@IP_ADDRESS_FROM_YOUR_SERVER</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>You can obtain the IP address by inspecting the logs of your DHCP server or from the <em>issue text</em> of the virtual consoles of the system.</p><p><img decoding="async" loading="lazy" alt="Cloud in a Box Issue Text" src="/assets/images/issue-6cc9ac7387e0589d625dded707510641.png" width="420" height="109" class="img_ev3q"></p></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="manual-installation">Manual installation<a href="#manual-installation" class="hash-link" aria-label="Direct link to Manual installation" title="Direct link to Manual installation">â€‹</a></h3>
<p>The scripts are not idempotent yet. In case there is any fail during <code>bootstrap.sh</code> or <code>deploy.sh</code> you have to
start over with fresh installation.</p>
<ol>
<li>
<p>Follow the <a href="/docs/iaas/deployment-examples/guides/deploy-guide/provisioning">provisioning guide</a>,
skip the part about disk layout and do it this way:</p>
<p><img decoding="async" loading="lazy" alt="Disk layout" src="/assets/images/disk-layout-db64866af60ef6d2c41245db78dd15d1.png" width="1033" height="769" class="img_ev3q"></p>
<ol>
<li>Create a 1 GByte ext4 partition mounted in <code>/boot</code></li>
<li>Create a 8 GByte swap partition</li>
<li>Create a 120 GByte unformatted partition</li>
<li>Use a <code>Create volume group (LVM)</code> to create a volume group called <code>system</code> with the size of
120 GByte on the partition 4 you just created</li>
<li>Create a logical volume by selecting the <code>Free Space</code> option under <code>system</code> LVM. This volume
should be mounted in <code>/</code> and have size of 100 GByte</li>
<li>Create a partition with the size of the rest of the drive&#x27;s space</li>
<li>Create a new LVM volume group on partition 5 called <code>osd-vg</code> (will be used for Ceph)</li>
</ol>
</li>
<li>
<p>After the Ubuntu installation, the system will be rebooted</p>
</li>
<li>
<p>Log into the machine via console to get its IP address and then use SSH to connect to the machine</p>
</li>
<li>
<p>Clone the <a href="https://github.com/osism/cloud-in-a-box" target="_blank" rel="noopener noreferrer">osism/cloud-in-a-box</a> repository into <code>/opt/cloud-in-a-box</code></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo git clone https://github.com/osism/cloud-in-a-box /opt/cloud-in-a-box</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Disable conflicting services from the default Ubuntu installation</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo /opt/cloud-in-a-box/cleanup.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Install upgrades</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt update</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt upgrade</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Run the <code>bootstrap.sh</code> script with the required <a href="#types">type</a> (use of <code>sandbox</code> is recommended)</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo /opt/cloud-in-a-box/bootstrap.sh sandbox</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Run the <code>deploy.sh</code> script with the same type as in step 8 to deploy services like Ceph and OpenStack</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo /opt/cloud-in-a-box/deploy.sh sandbox</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Shutdown the system</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo shutdown -h now</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Start the system again. System is ready for use, by default DHCP is tried on the first network device.</p>
</li>
<li>
<p>Login via SSH. Use the user <code>dragon</code> with the password <code>password</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ssh dragon@IP_ADDRESS_FROM_YOUR_SERVER</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>You can obtain the IP address by inspecting the logs of your DHCP server or from the <em>issue text</em> of the virtual consoles of the system.</p><p><img decoding="async" loading="lazy" alt="Cloud in a Box Issue Text" src="/assets/images/issue-6cc9ac7387e0589d625dded707510641.png" width="420" height="109" class="img_ev3q"></p></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage">Usage<a href="#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wireguard-vpn-service-access">Wireguard VPN service access<a href="#wireguard-vpn-service-access" class="hash-link" aria-label="Direct link to Wireguard VPN service access" title="Direct link to Wireguard VPN service access">â€‹</a></h3>
<p>Copy the <code>/home/dragon/wireguard-client.conf</code> file from Cloud in a Box to your workstation. This is necessary
for using the web endpoints on your workstation. Rename the Wireguard config file to something
like <code>cloud-in-a-box.conf</code>.</p>
<p>If you want to connect to the Cloud in a Box system from multiple clients, change the client IP
address in the config file to be different on each client.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">scp dragon@IP_ADDRESS_FROM_YOUR_SERVER:/home/dragon/wireguard-client.conf $HOME/cloud-in-a-box.conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Install Wireguard on your workstation, if you have not done this before. For instructions how to do
it on your workstation, please have a look on the documentation of your used distribution. The
Wireguard documentation you will find <a href="https://www.wireguard.com" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p>Start the Wireguard tunnel.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo wg-quick up $HOME/cloud-in-a-box.conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once the Wireguard tunnel has been set up, it is possible to access individual services on a name-based basis.
As a test, you can try whether the name <code>api.in-a-box.cloud</code> resolves correctly to the IP address <code>192.168.16.254</code>.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">dig +short A api.in-a-box.cloud</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">192.168.16.254</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If this does not work, a DNS filter such as Pi-hole or AdGuard will most likely be used. This ensures that private
IP ranges such as <code>192.168.16.0/20</code> are not resolved via a public DNS server. If this is the case, the following
entries must be added to the local <code>/etc/hosts</code> file for the name resolution to work.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">192.166.16.10	cgit.services.in-a-box.cloud</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">192.166.16.10	netbox.services.in-a-box.cloud</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">192.168.16.10	ara.services.in-a-box.cloud</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">192.168.16.10	flower.services.in-a-box.cloud</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">192.168.16.10	homer.services.in-a-box.cloud</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">192.168.16.10	phpmyadmin.services.in-a-box.cloud</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">192.168.16.10   manager.systems.in-a-box.cloud</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">192.168.16.254	api.in-a-box.cloud</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="webinterfaces">Webinterfaces<a href="#webinterfaces" class="hash-link" aria-label="Direct link to Webinterfaces" title="Direct link to Webinterfaces">â€‹</a></h3>
<p>If you want to access the services please choose the URL from the following list:</p>
<table><thead><tr><th style="text-align:left">Name</th><th style="text-align:left">URL</th><th style="text-align:left">Username</th><th style="text-align:left">Password</th><th style="text-align:left">Note</th></tr></thead><tbody><tr><td style="text-align:left">ARA</td><td style="text-align:left"><a href="https://ara.services.in-a-box.cloud" target="_blank" rel="noopener noreferrer">https://ara.services.in-a-box.cloud</a></td><td style="text-align:left">ara</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Ceph</td><td style="text-align:left"><a href="http://manager.systems.in-a-box.cloud:7000" target="_blank" rel="noopener noreferrer">http://manager.systems.in-a-box.cloud:7000</a></td><td style="text-align:left">admin</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Configuration</td><td style="text-align:left"><a href="https://cgit.services.in-a-box.cloud" target="_blank" rel="noopener noreferrer">https://cgit.services.in-a-box.cloud</a></td><td style="text-align:left">-</td><td style="text-align:left">-</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Flower</td><td style="text-align:left"><a href="https://flower.services.in-a-box.cloud" target="_blank" rel="noopener noreferrer">https://flower.services.in-a-box.cloud</a></td><td style="text-align:left">-</td><td style="text-align:left">-</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Grafana</td><td style="text-align:left"><a href="https://api.in-a-box.cloud:3000" target="_blank" rel="noopener noreferrer">https://api.in-a-box.cloud:3000</a></td><td style="text-align:left">admin</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">HAProxy</td><td style="text-align:left"><a href="http://manager.systems.in-a-box.cloud:1984" target="_blank" rel="noopener noreferrer">http://manager.systems.in-a-box.cloud:1984</a></td><td style="text-align:left">openstack</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Homer</td><td style="text-align:left"><a href="https://homer.services.in-a-box.cloud" target="_blank" rel="noopener noreferrer">https://homer.services.in-a-box.cloud</a></td><td style="text-align:left">-</td><td style="text-align:left">-</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Horizon</td><td style="text-align:left"><a href="https://api.in-a-box.cloud" target="_blank" rel="noopener noreferrer">https://api.in-a-box.cloud</a></td><td style="text-align:left">admin<br>test</td><td style="text-align:left">password<br>test</td><td style="text-align:left">domain: default, project: admin<br>domain: test, project: test</td></tr><tr><td style="text-align:left">Netbox</td><td style="text-align:left"><a href="https://netbox.services.in-a-box.cloud" target="_blank" rel="noopener noreferrer">https://netbox.services.in-a-box.cloud</a></td><td style="text-align:left">admin</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Netdata</td><td style="text-align:left"><a href="http://manager.systems.in-a-box.cloud:19999" target="_blank" rel="noopener noreferrer">http://manager.systems.in-a-box.cloud:19999</a></td><td style="text-align:left">-</td><td style="text-align:left">-</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">OpenSearch Dashboards</td><td style="text-align:left"><a href="https://api.in-a-box.cloud:5601" target="_blank" rel="noopener noreferrer">https://api.in-a-box.cloud:5601</a></td><td style="text-align:left">opensearch</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">RabbitMQ</td><td style="text-align:left"><a href="https://api.in-a-box.cloud:15672" target="_blank" rel="noopener noreferrer">https://api.in-a-box.cloud:15672</a></td><td style="text-align:left">openstack</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Skyline</td><td style="text-align:left"><a href="https://api.in-a-box.cloud:9999" target="_blank" rel="noopener noreferrer">https://api.in-a-box.cloud:9999</a></td><td style="text-align:left">admin<br>test</td><td style="text-align:left">password<br>test</td><td style="text-align:left">domain: default, project: admin<br>domain: test, project: test</td></tr><tr><td style="text-align:left">phpMyAdmin</td><td style="text-align:left"><a href="https://phpmyadmin.services.in-a-box.cloud" target="_blank" rel="noopener noreferrer">https://phpmyadmin.services.in-a-box.cloud</a></td><td style="text-align:left">root_shard_0</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="command-line-interfaces">Command-line interfaces<a href="#command-line-interfaces" class="hash-link" aria-label="Direct link to Command-line interfaces" title="Direct link to Command-line interfaces">â€‹</a></h3>
<p>Login to Cloud in a Box as described in step 8 of the installation chapter.</p>
<ul>
<li>Select one of the preconfigured environments:<!-- -->
<ul>
<li><code>system</code></li>
<li><code>admin</code></li>
<li><code>test</code></li>
</ul>
</li>
<li>Set the environment by exporting the environment variable: <code>OS_CLOUD</code>:<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">export OS_CLOUD=admin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Use <a href="https://docs.openstack.org/newton/user-guide/cli.html" target="_blank" rel="noopener noreferrer">OpenStack CLI</a> via the command <code>openstack</code>.<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">openstack availability zone list</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">openstack image list</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">openstack server list # After installation there are no servers</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="log-files">Log files<a href="#log-files" class="hash-link" aria-label="Direct link to Log files" title="Direct link to Log files">â€‹</a></h3>
<p>The logs that are logged on the console during the bootstrap and initial deployment
can be viewed in the file <code>/var/log/install-cloud-in-a-box.log</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="import-of-additional-images">Import of additional images<a href="#import-of-additional-images" class="hash-link" aria-label="Direct link to Import of additional images" title="Direct link to Import of additional images">â€‹</a></h3>
<p>The <a href="https://github.com/osism/openstack-image-manager/" target="_blank" rel="noopener noreferrer">OpenStack Image Manager</a> is used to manage images.
In the example, the <code>Garden Linux</code> image is imported.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">osism manage images --cloud=admin --filter &#x27;Garden Linux&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>All available images can be found in the <a href="https://github.com/osism/openstack-image-manager/tree/main/etc/images" target="_blank" rel="noopener noreferrer">osism/openstack-image-manager</a> repository.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade">Upgrade<a href="#upgrade" class="hash-link" aria-label="Direct link to Upgrade" title="Direct link to Upgrade">â€‹</a></h3>
<p>It is best to execute the commands within a screen session, it takes some time. Please note
that you cannot update the Ceph deployment at the moment. This will be enabled in the future.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">osism apply configuration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/opt/configuration/upgrade.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker system prune -a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="customisations">Customisations<a href="#customisations" class="hash-link" aria-label="Direct link to Customisations" title="Direct link to Customisations">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-of-2nd-nic-for-external-network">Use of 2nd NIC for external network<a href="#use-of-2nd-nic-for-external-network" class="hash-link" aria-label="Direct link to Use of 2nd NIC for external network" title="Direct link to Use of 2nd NIC for external network">â€‹</a></h3>
<p>In the default configuration, the Cloud in a Box is built in such a way that an internal
VLAN101 is used as an simulated external network and this is made usable via the 1st network
interface using masquerading. This makes it possible for instances running on the Cloud
in a Box to reach the internet. The disadvantage of this is that the instances themselves
can only be reached via floating IP addresses from the Cloud in a Box system itself or
via the Wireguard tunnel. Especially in edge environments, however, one would usually like
to have this differently and the instances should be directly accessible via the local
network.</p>
<p>To make this work, first identify the name of a 2nd network card to be used.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">dragon@manager:~$ sudo lshw -class network -short</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">H/W path          Device          Class          Description</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">============================================================</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/0/100/2.2/0      eno7            network        Ethernet Connection X552 10 GbE SFP+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/0/100/2.2/0.1    eno8            network        Ethernet Connection X552 10 GbE SFP+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/0/100/1c/0       eno1            network        I210 Gigabit Network Connection</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/0/100/1c.1/0     eno2            network        I210 Gigabit Network Connection</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/0/100/1c.4/0     eno3            network        I350 Gigabit Network Connection</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/0/100/1c.4/0.1   eno4            network        I350 Gigabit Network Connection</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/0/100/1c.4/0.2   eno5            network        I350 Gigabit Network Connection</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/0/100/1c.4/0.3   eno6            network        I350 Gigabit Network Connection</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the following we use <code>eno7</code>. Activate the device manually with  <code>sudo ip link set up dev eno7</code>.
Then check that a link is actually present.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">dragon@manager:~$ ethtool eno7</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Settings for eno7:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	Supported ports: [ FIBRE ]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	Supported link modes:   10000baseT/Full</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[...]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	Link detected: yes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now this device is made permanently known in the network configuration. Select the MTU
accordingly. For 1 GBit rather <code>1500</code> than <code>9100</code>. The 2nd network interface should be
configured without IP configuration (neither static nor DHCP).</p>
<ul>
<li><code>/opt/configuration/inventory/group_vars/generic/network.yml</code></li>
<li><code>/opt/configuration/environments/manager/group_vars/manager.yml</code></li>
</ul>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">network_ethernets</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">eno1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">dhcp4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">eno7</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">mtu</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">9100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then, this change is deployed and applied.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">osism apply network</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo netplan apply</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now the configuration for Neutron and OVN is prepared. <code>network_workload_interface</code>
is expanded by the 2nd network interface. The order is not random, first <code>vlan101</code>
then <code>eno7</code>. <code>neutron_bridge_name</code> is added.</p>
<ul>
<li><code>/opt/configuration/inventory/group_vars/generic/network.yml</code></li>
<li><code>/opt/configuration/environments/manager/group_vars/manager.yml</code></li>
</ul>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">network_workload_interface</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;vlan101,eno7&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">neutron_bridge_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;br-ex,br-add&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then, this change is deployed.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">osism reconciler sync</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">osism apply openvswitch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">osism apply ovn</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">osism apply neutron</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now segments and/or subnets can be configured. In this case, <code>eno7</code> is configured as an
untagged port on the remote side.</p>
<ul>
<li><code>/opt/configuration/environments/openstack/playbook-additional-public-network.yml</code></li>
</ul>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Create additional public network</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">hosts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> localhost</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">connection</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> local</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">tasks</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Create additional public network</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">openstack.cloud.network</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">cloud</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">state</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> present</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> public</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">add</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">external</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">provider_network_type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> flat</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">provider_physical_network</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> physnet2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Create additional public subnet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">openstack.cloud.subnet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">cloud</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">state</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> present</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> subnet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">public</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">add</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">network_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> public</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">add</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">cidr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 192.168.23.0/24</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">enable_dhcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">allocation_pool_start</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 192.168.23.100</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">allocation_pool_end</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 192.168.23.200</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">gateway_ip</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 192.168.23.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">dns_nameservers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> 8.8.8.8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> 9.9.9.9</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The additional public network can now be made known with
<code>osism apply -e openstack additional-public-network</code>.</p>
<p>There is now a 2nd floating IP address pool with the name <code>public-add</code>
available for use. If instances are to be started directly in this network,
<code>enable_dhcp: true</code> must be set. In this case, it should be clarified in
advance with the provider of the external network whether the use of DHCP
is permitted there.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="high-load-after-reboot">High load after reboot<a href="#high-load-after-reboot" class="hash-link" aria-label="Direct link to High load after reboot" title="Direct link to High load after reboot">â€‹</a></h3>
<p>After a reboot, there is a very high load for the first few minutes. Depending
on which CPU is used, this can be over 100.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">dragon@cumulus:~$ uptime</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> 16:58:12 up 1 min,  1 user,  load average: 101.44, 30.94, 10.78</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After about 5 minutes, when all services have been started, this normalises again
and the load drops well below 10.</p>
<p><img decoding="async" loading="lazy" alt="Netdata System Load Average" src="/assets/images/netdata-high-load-28247e4ab28730373b4bc4cd6e923b37.png" width="3360" height="1926" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="broken-disk-setup">Broken disk setup<a href="#broken-disk-setup" class="hash-link" aria-label="Direct link to Broken disk setup" title="Direct link to Broken disk setup">â€‹</a></h3>
<p><img decoding="async" loading="lazy" alt="Broken disk setup" src="/assets/images/broken-disk-setup-c880f78ba33fc0577dce811dc2e42724.png" width="2020" height="1194" class="img_ev3q"></p>
<p>This error means that your disk setup is broken. Use <code>cfdisk</code> and delete all partitions on
the system on which you want to install the Cloud in a Box image.</p>
<p>With <code>lsblk</code> you can verify if the partitions are empty.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a href="#development" class="hash-link" aria-label="Direct link to Development" title="Direct link to Development">â€‹</a></h2>
<p>For the further development of the scripts and the mechanisms of the Cloud in a Box,
you need to know the following.</p>
<ul>
<li>The operating system is brought onto the node via <a href="https://github.com/osism/node-image" target="_blank" rel="noopener noreferrer">an automatic Ubuntu installation</a>
that uses <a href="https://cloud-init.io" target="_blank" rel="noopener noreferrer">cloud-init</a></li>
<li>The installation starts the script <a href="https://github.com/osism/cloud-in-a-box/blob/main/init.sh" target="_blank" rel="noopener noreferrer">init.sh</a> which performs
an initial clone of the <a href="https://github.com/osism/cloud-in-a-box" target="_blank" rel="noopener noreferrer">osism/cloud-in-a-box</a> repository and a checkout of
the <code>main</code> branch. It also executes the <a href="https://github.com/osism/cloud-in-a-box/blob/main/deploy.sh" target="_blank" rel="noopener noreferrer">deploy.sh</a> and
<a href="https://github.com/osism/cloud-in-a-box/blob/main/bootstrap.sh" target="_blank" rel="noopener noreferrer">bootstrap.sh</a> scripts.</li>
<li>The installation persists the kernel parameters of the initial boot to the file <code>/etc/.initial-kernel-commandline</code></li>
<li>The status and activities of the deployment are logged in <code>/var/log/install-cloud-in-a-box.log</code>. For proper colors use <code>less -r</code>.
Search for <code>OVERALL STATUS</code> to find the result of the specific installation steps.</li>
<li>Branch and location of the <a href="https://github.com/osism/cloud-in-a-box" target="_blank" rel="noopener noreferrer">osism/cloud-in-a-box</a> repository can be overriden
by setting the kernel parameters <code>ciab_repo_url</code> (a public repository address without authentication) and <code>ciab_branch</code>
(a name of a branch, use only ASCII chars, <code>-</code>, and <code>_</code>).</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/SovereignCloudStack/docs/tree/main/docs/02-iaas/deployment-examples/cloud-in-a-box/index.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/deployment-examples"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Deployment Examples</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/iaas/deployment-examples/cloud-in-a-box/running-on-a-virtual-machine"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Running on a virtual machine</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#types" class="table-of-contents__link toc-highlight">Types</a></li><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a><ul><li><a href="#automated-installation-recommended" class="table-of-contents__link toc-highlight">Automated installation (recommended)</a></li><li><a href="#manual-installation" class="table-of-contents__link toc-highlight">Manual installation</a></li></ul></li><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a><ul><li><a href="#wireguard-vpn-service-access" class="table-of-contents__link toc-highlight">Wireguard VPN service access</a></li><li><a href="#webinterfaces" class="table-of-contents__link toc-highlight">Webinterfaces</a></li><li><a href="#command-line-interfaces" class="table-of-contents__link toc-highlight">Command-line interfaces</a></li><li><a href="#log-files" class="table-of-contents__link toc-highlight">Log files</a></li><li><a href="#import-of-additional-images" class="table-of-contents__link toc-highlight">Import of additional images</a></li><li><a href="#upgrade" class="table-of-contents__link toc-highlight">Upgrade</a></li></ul></li><li><a href="#customisations" class="table-of-contents__link toc-highlight">Customisations</a><ul><li><a href="#use-of-2nd-nic-for-external-network" class="table-of-contents__link toc-highlight">Use of 2nd NIC for external network</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#high-load-after-reboot" class="table-of-contents__link toc-highlight">High load after reboot</a></li><li><a href="#broken-disk-setup" class="table-of-contents__link toc-highlight">Broken disk setup</a></li></ul></li><li><a href="#development" class="table-of-contents__link toc-highlight">Development</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">Contribute</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://matrix.to/#/!TiDqlLmEUaXqTemaLc:matrix.org?via=matrix.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Matrix<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://fosstodon.org/@sovereigncloudstack" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mastodon<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/SovereignCloudStack/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Sovereign Cloud Stack, SCS and the logo are registered trademarks of the Open Source Business Alliance e.V. â€” Other trademarks are property of their respective owners.</div></div></div></footer></div>
</body>
</html>